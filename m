Return-Path: <linux-hwmon-owner@vger.kernel.org>
X-Original-To: lists+linux-hwmon@lfdr.de
Delivered-To: lists+linux-hwmon@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 01483337F67
	for <lists+linux-hwmon@lfdr.de>; Thu, 11 Mar 2021 22:13:09 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S230510AbhCKVLs (ORCPT <rfc822;lists+linux-hwmon@lfdr.de>);
        Thu, 11 Mar 2021 16:11:48 -0500
Received: from gate2.alliedtelesis.co.nz ([202.36.163.20]:52081 "EHLO
        gate2.alliedtelesis.co.nz" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S230411AbhCKVKe (ORCPT
        <rfc822;linux-hwmon@vger.kernel.org>);
        Thu, 11 Mar 2021 16:10:34 -0500
Received: from svr-chch-seg1.atlnz.lc (mmarshal3.atlnz.lc [10.32.18.43])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (Client did not present a certificate)
        by gate2.alliedtelesis.co.nz (Postfix) with ESMTPS id 12FC8891AE
        for <linux-hwmon@vger.kernel.org>; Fri, 12 Mar 2021 10:10:33 +1300 (NZDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=alliedtelesis.co.nz;
        s=mail181024; t=1615497033;
        bh=RtFRPiwJhAA7j84POcAy2KnSTsMin/lKrGuRfN/qHmA=;
        h=From:To:CC:Subject:Date:References:In-Reply-To;
        b=iLrSsCzyKduKlXErX0+1eYmFtuvMcHTL3109+5GeYtBoAPJ7Vyox22RqsV/m3XlXQ
         nFr84Lve2vlZIUT9dQLQqX7MyuUU2ofG2XauaqEbO2JuIacOzXiR/bx/xbYNNbPOiZ
         G2cUKFHswHJIGuL/2CyFjZgqVvMArmaP0eZIx43BRHMP/+Ao11D2+mVf7xqytW3WYO
         yG6DG43pyQmX1+dVlJoIe+ZA7pRhpDSldPoypCjrKO5UpGfiyRwftkG2wG3AaG3/ce
         SAIxskMJmlL+XO/kqjErK5f8okapfvOUOovXtJ0TWMMtKnaz3zoco7eO9GdASMr6qQ
         nMI2YW1E7SP8w==
Received: from svr-chch-ex1.atlnz.lc (Not Verified[2001:df5:b000:bc8::77]) by svr-chch-seg1.atlnz.lc with Trustwave SEG (v8,2,6,11305)
        id <B604a87480001>; Fri, 12 Mar 2021 10:10:32 +1300
Received: from svr-chch-ex1.atlnz.lc (2001:df5:b000:bc8:409d:36f5:8899:92e8)
 by svr-chch-ex1.atlnz.lc (2001:df5:b000:bc8:409d:36f5:8899:92e8) with
 Microsoft SMTP Server (TLS) id 15.0.1497.2; Fri, 12 Mar 2021 10:10:32 +1300
Received: from svr-chch-ex1.atlnz.lc ([fe80::409d:36f5:8899:92e8]) by
 svr-chch-ex1.atlnz.lc ([fe80::409d:36f5:8899:92e8%12]) with mapi id
 15.00.1497.012; Fri, 12 Mar 2021 10:10:32 +1300
From:   Chris Packham <Chris.Packham@alliedtelesis.co.nz>
To:     Guenter Roeck <linux@roeck-us.net>,
        Hardware Monitoring <linux-hwmon@vger.kernel.org>
CC:     Jean Delvare <jdelvare@suse.com>
Subject: Re: [PATCH 3/3] hwmon: (adm9240) Convert to
 devm_hwmon_device_register_with_info API
Thread-Topic: [PATCH 3/3] hwmon: (adm9240) Convert to
 devm_hwmon_device_register_with_info API
Thread-Index: AQHXFkjLr2Hz0R+oz0WybSgWrdlcQ6p+b3CA
Date:   Thu, 11 Mar 2021 21:10:31 +0000
Message-ID: <f7a3d33c-1f82-0ac9-d4fc-37149847ab86@alliedtelesis.co.nz>
References: <20210311073302.221954-1-linux@roeck-us.net>
 <20210311073302.221954-3-linux@roeck-us.net>
In-Reply-To: <20210311073302.221954-3-linux@roeck-us.net>
Accept-Language: en-NZ, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-exchange-messagesentrepresentingtype: 1
x-ms-exchange-transport-fromentityheader: Hosted
x-originating-ip: [10.32.1.11]
Content-Type: text/plain; charset="utf-8"
Content-ID: <84D32B6F7D43D64286F73B39BD303510@atlnz.lc>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-SEG-SpamProfiler-Analysis: v=2.3 cv=GfppYjfL c=1 sm=1 tr=0 a=Xf/6aR1Nyvzi7BryhOrcLQ==:117 a=xqWC_Br6kY4A:10 a=oKJsc7D3gJEA:10 a=IkcTkHD0fZMA:10 a=dESyimp9J3IA:10 a=_jlGtV7tAAAA:8 a=mwQutjWniz-iXiLenIwA:9 a=QEXdDO2ut3YA:10 a=nlm17XC03S6CtCLSeiRr:22
X-SEG-SpamProfiler-Score: 0
Precedence: bulk
List-ID: <linux-hwmon.vger.kernel.org>
X-Mailing-List: linux-hwmon@vger.kernel.org

T24gMTEvMDMvMjEgODozMyBwbSwgR3VlbnRlciBSb2VjayB3cm90ZToNCj4gQWxzbyB1c2UgcmVn
bWFwIGZvciByZWdpc3RlciBjYWNoaW5nLiBUaGlzIGNoYW5nZSByZWR1Y2VzIGNvZGUgYW5kDQo+
IGRhdGEgc2l6ZSBieSBtb3JlIHRoYW4gNDAlLg0KPg0KPiBXaGlsZSBhdCBpdCwgZml4ZWQgc29t
ZSB3YXJuaW5ncyByZXBvcnRlZCBieSBjaGVja3BhdGNoLg0KPg0KPiBDYzogQ2hyaXMgUGFja2hh
bSA8Q2hyaXMuUGFja2hhbUBhbGxpZWR0ZWxlc2lzLmNvLm56Pg0KPiBTaWduZWQtb2ZmLWJ5OiBH
dWVudGVyIFJvZWNrIDxsaW51eEByb2Vjay11cy5uZXQ+DQpSZXZpZXdlZC1ieTogQ2hyaXMgUGFj
a2hhbSA8Y2hyaXMucGFja2hhbUBhbGxpZWR0ZWxlc2lzLmNvLm56Pg0KVGVzdGVkLWJ5OiBDaHJp
cyBQYWNraGFtIDxjaHJpcy5wYWNraGFtQGFsbGllZHRlbGVzaXMuY28ubno+DQo+IC0tLQ0KPiAg
IGRyaXZlcnMvaHdtb24vYWRtOTI0MC5jIHwgOTQwICsrKysrKysrKysrKysrKysrKystLS0tLS0t
LS0tLS0tLS0tLS0tLS0NCj4gICAxIGZpbGUgY2hhbmdlZCwgNDQ1IGluc2VydGlvbnMoKyksIDQ5
NSBkZWxldGlvbnMoLSkNCj4NCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvaHdtb24vYWRtOTI0MC5j
IGIvZHJpdmVycy9od21vbi9hZG05MjQwLmMNCj4gaW5kZXggNzQwNDA4MmM3YTNmLi41Njc3MjYz
YmNmMGQgMTAwNjQ0DQo+IC0tLSBhL2RyaXZlcnMvaHdtb24vYWRtOTI0MC5jDQo+ICsrKyBiL2Ry
aXZlcnMvaHdtb24vYWRtOTI0MC5jDQo+IEBAIC0yOCw2ICsyOCw3IEBADQo+ICAgICogTE04MSBl
eHRlbmRlZCB0ZW1wIHJlYWRpbmcgbm90IGltcGxlbWVudGVkDQo+ICAgICovDQo+ICAgDQo+ICsj
aW5jbHVkZSA8bGludXgvYml0cy5oPg0KPiAgICNpbmNsdWRlIDxsaW51eC9pbml0Lmg+DQo+ICAg
I2luY2x1ZGUgPGxpbnV4L21vZHVsZS5oPg0KPiAgICNpbmNsdWRlIDxsaW51eC9zbGFiLmg+DQo+
IEBAIC0zNyw3ICszOCw2IEBADQo+ICAgI2luY2x1ZGUgPGxpbnV4L2h3bW9uLXZpZC5oPg0KPiAg
ICNpbmNsdWRlIDxsaW51eC9lcnIuaD4NCj4gICAjaW5jbHVkZSA8bGludXgvbXV0ZXguaD4NCj4g
LSNpbmNsdWRlIDxsaW51eC9qaWZmaWVzLmg+DQo+ICAgI2luY2x1ZGUgPGxpbnV4L3JlZ21hcC5o
Pg0KPiAgIA0KPiAgIC8qIEFkZHJlc3NlcyB0byBzY2FuICovDQo+IEBAIC0xMjYsMjkgKzEyNiwx
NSBAQCBzdHJ1Y3QgYWRtOTI0MF9kYXRhIHsNCj4gICAJc3RydWN0IGRldmljZSAqZGV2Ow0KPiAg
IAlzdHJ1Y3QgcmVnbWFwICpyZWdtYXA7DQo+ICAgCXN0cnVjdCBtdXRleCB1cGRhdGVfbG9jazsN
Cj4gLQljaGFyIHZhbGlkOw0KPiAtCXVuc2lnbmVkIGxvbmcgbGFzdF91cGRhdGVkX21lYXN1cmU7
DQo+IC0JdW5zaWduZWQgbG9uZyBsYXN0X3VwZGF0ZWRfY29uZmlnOw0KPiAtDQo+IC0JdTggaW5b
Nl07CQkvKiBybwlpbjBfaW5wdXQgKi8NCj4gLQl1OCBpbl9tYXhbNl07CQkvKiBydwlpbjBfbWF4
ICovDQo+IC0JdTggaW5fbWluWzZdOwkJLyogcncJaW4wX21pbiAqLw0KPiAtCXU4IGZhblsyXTsJ
CS8qIHJvCWZhbjFfaW5wdXQgKi8NCj4gLQl1OCBmYW5fbWluWzJdOwkJLyogcncJZmFuMV9taW4g
Ki8NCj4gKw0KPiAgIAl1OCBmYW5fZGl2WzJdOwkJLyogcncJZmFuMV9kaXYsIHJlYWQtb25seSBh
Y2Nlc3NvciAqLw0KPiAtCXMxNiB0ZW1wOwkJLyogcm8JdGVtcDFfaW5wdXQsIDktYml0IHNpZ24t
ZXh0ZW5kZWQgKi8NCj4gLQlzOCB0ZW1wX21heFsyXTsJCS8qIHJ3CTAgLT4gdGVtcF9tYXgsIDEg
LT4gdGVtcF9tYXhfaHlzdCAqLw0KPiAtCXUxNiBhbGFybXM7CQkvKiBybwlhbGFybXMgKi8NCj4g
LQl1OCBhb3V0OwkJLyogcncJYW91dF9vdXRwdXQgKi8NCj4gLQl1OCB2aWQ7CQkJLyogcm8Jdmlk
ICovDQo+ICAgCXU4IHZybTsJCQkvKiAtLQl2cm0gc2V0IG9uIHN0YXJ0dXAsIG5vIGFjY2Vzc29y
ICovDQo+ICAgfTsNCj4gICANCj4gICAvKiB3cml0ZSBuZXcgZmFuIGRpdiwgY2FsbGVycyBtdXN0
IGhvbGQgZGF0YS0+dXBkYXRlX2xvY2sgKi8NCj4gLXN0YXRpYyBpbnQgYWRtOTI0MF93cml0ZV9m
YW5fZGl2KHN0cnVjdCBhZG05MjQwX2RhdGEgKmRhdGEsIGludCBuciwNCj4gLQkJdTggZmFuX2Rp
dikNCj4gK3N0YXRpYyBpbnQgYWRtOTI0MF93cml0ZV9mYW5fZGl2KHN0cnVjdCBhZG05MjQwX2Rh
dGEgKmRhdGEsIGludCBjaGFubmVsLCB1OCBmYW5fZGl2KQ0KPiAgIHsNCj4gLQl1bnNpZ25lZCBp
bnQgcmVnLCBvbGQsIHNoaWZ0ID0gKG5yICsgMikgKiAyOw0KPiArCXVuc2lnbmVkIGludCByZWcs
IG9sZCwgc2hpZnQgPSAoY2hhbm5lbCArIDIpICogMjsNCj4gICAJaW50IGVycjsNCj4gICANCj4g
ICAJZXJyID0gcmVnbWFwX3JlYWQoZGF0YS0+cmVnbWFwLCBBRE05MjQwX1JFR19WSURfRkFOX0RJ
ViwgJnJlZyk7DQo+IEBAIC0xNjEsMzM1ICsxNDcsMTIgQEAgc3RhdGljIGludCBhZG05MjQwX3dy
aXRlX2Zhbl9kaXYoc3RydWN0IGFkbTkyNDBfZGF0YSAqZGF0YSwgaW50IG5yLA0KPiAgIAlpZiAo
ZXJyIDwgMCkNCj4gICAJCXJldHVybiBlcnI7DQo+ICAgCWRldl9kYmcoZGF0YS0+ZGV2LA0KPiAt
CQkiZmFuJWQgY2xvY2sgZGl2aWRlciBjaGFuZ2VkIGZyb20gJXUgdG8gJXVcbiIsDQo+IC0JCW5y
ICsgMSwgMSA8PCBvbGQsIDEgPDwgZmFuX2Rpdik7DQo+ICsJCSJmYW4lZCBjbG9jayBkaXZpZGVy
IGNoYW5nZWQgZnJvbSAlbHUgdG8gJWx1XG4iLA0KPiArCQljaGFubmVsICsgMSwgQklUKG9sZCks
IEJJVChmYW5fZGl2KSk7DQo+ICAgDQo+ICAgCXJldHVybiAwOw0KPiAgIH0NCj4gICANCj4gLXN0
YXRpYyBpbnQgYWRtOTI0MF91cGRhdGVfbWVhc3VyZShzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRh
KQ0KPiAtew0KPiAtCXVuc2lnbmVkIGludCB2YWw7DQo+IC0JdTggcmVnc1syXTsNCj4gLQlpbnQg
ZXJyOw0KPiAtCWludCBpOw0KPiAtDQo+IC0JZXJyID0gcmVnbWFwX2J1bGtfcmVhZChkYXRhLT5y
ZWdtYXAsIEFETTkyNDBfUkVHX0lOKDApLCAmZGF0YS0+aW5bMF0sIDYpOw0KPiAtCWlmIChlcnIg
PCAwKQ0KPiAtCQlyZXR1cm4gZXJyOw0KPiAtCWVyciA9IHJlZ21hcF9idWxrX3JlYWQoZGF0YS0+
cmVnbWFwLCBBRE05MjQwX1JFR19JTlQoMCksICZyZWdzLCAyKTsNCj4gLQlpZiAoZXJyIDwgMCkN
Cj4gLQkJcmV0dXJuIGVycjsNCj4gLQ0KPiAtCWRhdGEtPmFsYXJtcyA9IHJlZ3NbMF0gfCByZWdz
WzFdIDw8IDg7DQo+IC0NCj4gLQkvKg0KPiAtCSAqIHJlYWQgdGVtcGVyYXR1cmU6IGFzc3VtZSB0
ZW1wZXJhdHVyZSBjaGFuZ2VzIGxlc3MgdGhhbg0KPiAtCSAqIDAuNSdDIHBlciB0d28gbWVhc3Vy
ZW1lbnQgY3ljbGVzIHRodXMgaWdub3JlIHBvc3NpYmxlDQo+IC0JICogYnV0IHVubGlrZWx5IGFs
aWFzaW5nIGVycm9yIG9uIGxzYiByZWFkaW5nLiAtLUdyYW50DQo+IC0JICovDQo+IC0JZXJyID0g
cmVnbWFwX3JlYWQoZGF0YS0+cmVnbWFwLCBBRE05MjQwX1JFR19URU1QLCAmdmFsKTsNCj4gLQlp
ZiAoZXJyIDwgMCkNCj4gLQkJcmV0dXJuIGVycjsNCj4gLQlkYXRhLT50ZW1wID0gdmFsIDw8IDg7
DQo+IC0JZXJyID0gcmVnbWFwX3JlYWQoZGF0YS0+cmVnbWFwLCBBRE05MjQwX1JFR19URU1QX0NP
TkYsICZ2YWwpOw0KPiAtCWlmIChlcnIgPCAwKQ0KPiAtCQlyZXR1cm4gZXJyOw0KPiAtCWRhdGEt
PnRlbXAgfD0gdmFsOw0KPiAtDQo+IC0JZXJyID0gcmVnbWFwX2J1bGtfcmVhZChkYXRhLT5yZWdt
YXAsIEFETTkyNDBfUkVHX0ZBTigwKSwNCj4gLQkJCSAgICAgICAmZGF0YS0+ZmFuWzBdLCAyKTsN
Cj4gLQlpZiAoZXJyIDwgMCkNCj4gLQkJcmV0dXJuIGVycjsNCj4gLQ0KPiAtCWZvciAoaSA9IDA7
IGkgPCAyOyBpKyspIHsgLyogcmVhZCBmYW5zICovDQo+IC0JCS8qIGFkanVzdCBmYW4gY2xvY2sg
ZGl2aWRlciBvbiBvdmVyZmxvdyAqLw0KPiAtCQlpZiAoZGF0YS0+dmFsaWQgJiYgZGF0YS0+ZmFu
W2ldID09IDI1NSAmJg0KPiAtCQkJCWRhdGEtPmZhbl9kaXZbaV0gPCAzKSB7DQo+IC0NCj4gLQkJ
CWVyciA9IGFkbTkyNDBfd3JpdGVfZmFuX2RpdihkYXRhLCBpLA0KPiAtCQkJCQkrK2RhdGEtPmZh
bl9kaXZbaV0pOw0KPiAtCQkJaWYgKGVyciA8IDApDQo+IC0JCQkJcmV0dXJuIGVycjsNCj4gLQ0K
PiAtCQkJLyogYWRqdXN0IGZhbl9taW4gaWYgYWN0aXZlLCBidXQgbm90IHRvIDAgKi8NCj4gLQkJ
CWlmIChkYXRhLT5mYW5fbWluW2ldIDwgMjU1ICYmDQo+IC0JCQkJCWRhdGEtPmZhbl9taW5baV0g
Pj0gMikNCj4gLQkJCQlkYXRhLT5mYW5fbWluW2ldIC89IDI7DQo+IC0JCX0NCj4gLQl9DQo+IC0N
Cj4gLQlyZXR1cm4gMDsNCj4gLX0NCj4gLQ0KPiAtc3RhdGljIGludCBhZG05MjQwX3VwZGF0ZV9j
b25maWcoc3RydWN0IGFkbTkyNDBfZGF0YSAqZGF0YSkNCj4gLXsNCj4gLQl1bnNpZ25lZCBpbnQg
dmFsOw0KPiAtCWludCBpOw0KPiAtCWludCBlcnI7DQo+IC0NCj4gLQlmb3IgKGkgPSAwOyBpIDwg
NjsgaSsrKSB7DQo+IC0JCWVyciA9IHJlZ21hcF9yYXdfcmVhZChkYXRhLT5yZWdtYXAsIEFETTky
NDBfUkVHX0lOX01JTihpKSwNCj4gLQkJCQkgICAgICAmZGF0YS0+aW5fbWluW2ldLCAxKTsNCj4g
LQkJaWYgKGVyciA8IDApDQo+IC0JCQlyZXR1cm4gZXJyOw0KPiAtCQllcnIgPSByZWdtYXBfcmF3
X3JlYWQoZGF0YS0+cmVnbWFwLCBBRE05MjQwX1JFR19JTl9NQVgoaSksDQo+IC0JCQkJICAgICAg
JmRhdGEtPmluX21heFtpXSwgMSk7DQo+IC0JCWlmIChlcnIgPCAwKQ0KPiAtCQkJcmV0dXJuIGVy
cjsNCj4gLQl9DQo+IC0JZXJyID0gcmVnbWFwX2J1bGtfcmVhZChkYXRhLT5yZWdtYXAsIEFETTky
NDBfUkVHX0ZBTl9NSU4oMCksDQo+IC0JCQkJICAgICAgJmRhdGEtPmZhbl9taW5bMF0sIDIpOw0K
PiAtCWlmIChlcnIgPCAwKQ0KPiAtCQlyZXR1cm4gZXJyOw0KPiAtCWVyciA9IHJlZ21hcF9idWxr
X3JlYWQoZGF0YS0+cmVnbWFwLCBBRE05MjQwX1JFR19URU1QX01BWCgwKSwNCj4gLQkJCQkgICAg
ICAmZGF0YS0+dGVtcF9tYXhbMF0sIDIpOw0KPiAtCWlmIChlcnIgPCAwKQ0KPiAtCQlyZXR1cm4g
ZXJyOw0KPiAtDQo+IC0JLyogcmVhZCBmYW4gZGl2cyBhbmQgNS1iaXQgVklEICovDQo+IC0JZXJy
ID0gcmVnbWFwX3JlYWQoZGF0YS0+cmVnbWFwLCBBRE05MjQwX1JFR19WSURfRkFOX0RJViwgJnZh
bCk7DQo+IC0JaWYgKGVyciA8IDApDQo+IC0JCXJldHVybiBlcnI7DQo+IC0JZGF0YS0+ZmFuX2Rp
dlswXSA9ICh2YWwgPj4gNCkgJiAzOw0KPiAtCWRhdGEtPmZhbl9kaXZbMV0gPSAodmFsID4+IDYp
ICYgMzsNCj4gLQlkYXRhLT52aWQgPSB2YWwgJiAweDBmOw0KPiAtCWVyciA9IHJlZ21hcF9yZWFk
KGRhdGEtPnJlZ21hcCwgQURNOTI0MF9SRUdfVklENCwgJnZhbCk7DQo+IC0JaWYgKGVyciA8IDAp
DQo+IC0JCXJldHVybiBlcnI7DQo+IC0JZGF0YS0+dmlkIHw9ICh2YWwgJiAxKSA8PCA0Ow0KPiAt
CS8qIHJlYWQgYW5hbG9nIG91dCAqLw0KPiAtCWVyciA9IHJlZ21hcF9yYXdfcmVhZChkYXRhLT5y
ZWdtYXAsIEFETTkyNDBfUkVHX0FOQUxPR19PVVQsDQo+IC0JCQkgICAgICAmZGF0YS0+YW91dCwg
MSk7DQo+IC0NCj4gLQlyZXR1cm4gZXJyOw0KPiAtfQ0KPiAtDQo+IC1zdGF0aWMgc3RydWN0IGFk
bTkyNDBfZGF0YSAqYWRtOTI0MF91cGRhdGVfZGV2aWNlKHN0cnVjdCBkZXZpY2UgKmRldikNCj4g
LXsNCj4gLQlzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRhID0gZGV2X2dldF9kcnZkYXRhKGRldik7
DQo+IC0JaW50IGVycjsNCj4gLQ0KPiAtCW11dGV4X2xvY2soJmRhdGEtPnVwZGF0ZV9sb2NrKTsN
Cj4gLQ0KPiAtCS8qIG1pbmltdW0gbWVhc3VyZW1lbnQgY3ljbGU6IDEuNzUgc2Vjb25kcyAqLw0K
PiAtCWlmICh0aW1lX2FmdGVyKGppZmZpZXMsIGRhdGEtPmxhc3RfdXBkYXRlZF9tZWFzdXJlICsg
KEhaICogNyAvIDQpKQ0KPiAtCQkJfHwgIWRhdGEtPnZhbGlkKSB7DQo+IC0JCWVyciA9IGFkbTky
NDBfdXBkYXRlX21lYXN1cmUoZGF0YSk7DQo+IC0JCWlmIChlcnIgPCAwKSB7DQo+IC0JCQlkYXRh
LT52YWxpZCA9IDA7DQo+IC0JCQltdXRleF91bmxvY2soJmRhdGEtPnVwZGF0ZV9sb2NrKTsNCj4g
LQkJCXJldHVybiBFUlJfUFRSKGVycik7DQo+IC0JCX0NCj4gLQkJZGF0YS0+bGFzdF91cGRhdGVk
X21lYXN1cmUgPSBqaWZmaWVzOw0KPiAtCX0NCj4gLQ0KPiAtCS8qIG1pbmltdW0gY29uZmlnIHJl
YWRpbmcgY3ljbGU6IDMwMCBzZWNvbmRzICovDQo+IC0JaWYgKHRpbWVfYWZ0ZXIoamlmZmllcywg
ZGF0YS0+bGFzdF91cGRhdGVkX2NvbmZpZyArIChIWiAqIDMwMCkpDQo+IC0JCQl8fCAhZGF0YS0+
dmFsaWQpIHsNCj4gLQkJZXJyID0gYWRtOTI0MF91cGRhdGVfY29uZmlnKGRhdGEpOw0KPiAtCQlp
ZiAoZXJyIDwgMCkgew0KPiAtCQkJZGF0YS0+dmFsaWQgPSAwOw0KPiAtCQkJbXV0ZXhfdW5sb2Nr
KCZkYXRhLT51cGRhdGVfbG9jayk7DQo+IC0JCQlyZXR1cm4gRVJSX1BUUihlcnIpOw0KPiAtCQl9
DQo+IC0JCWRhdGEtPmxhc3RfdXBkYXRlZF9jb25maWcgPSBqaWZmaWVzOw0KPiAtCQlkYXRhLT52
YWxpZCA9IDE7DQo+IC0JfQ0KPiAtCW11dGV4X3VubG9jaygmZGF0YS0+dXBkYXRlX2xvY2spOw0K
PiAtCXJldHVybiBkYXRhOw0KPiAtfQ0KPiAtDQo+IC0vKioqIHN5c2ZzIGFjY2Vzc29ycyAqKiov
DQo+IC0NCj4gLS8qIHRlbXBlcmF0dXJlICovDQo+IC1zdGF0aWMgc3NpemVfdCB0ZW1wMV9pbnB1
dF9zaG93KHN0cnVjdCBkZXZpY2UgKmRldiwNCj4gLQkJCQlzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0
ZSAqZHVtbXksIGNoYXIgKmJ1ZikNCj4gLXsNCj4gLQlzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRh
ID0gYWRtOTI0MF91cGRhdGVfZGV2aWNlKGRldik7DQo+IC0NCj4gLQlpZiAoSVNfRVJSKGRhdGEp
KQ0KPiAtCQlyZXR1cm4gUFRSX0VSUihkYXRhKTsNCj4gLQ0KPiAtCXJldHVybiBzcHJpbnRmKGJ1
ZiwgIiVkXG4iLCBkYXRhLT50ZW1wIC8gMTI4ICogNTAwKTsgLyogOS1iaXQgdmFsdWUgKi8NCj4g
LX0NCj4gLQ0KPiAtc3RhdGljIHNzaXplX3QgbWF4X3Nob3coc3RydWN0IGRldmljZSAqZGV2LCBz
dHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqZGV2YXR0ciwNCj4gLQkJCWNoYXIgKmJ1ZikNCj4gLXsN
Cj4gLQlzdHJ1Y3Qgc2Vuc29yX2RldmljZV9hdHRyaWJ1dGUgKmF0dHIgPSB0b19zZW5zb3JfZGV2
X2F0dHIoZGV2YXR0cik7DQo+IC0Jc3RydWN0IGFkbTkyNDBfZGF0YSAqZGF0YSA9IGFkbTkyNDBf
dXBkYXRlX2RldmljZShkZXYpOw0KPiAtDQo+IC0JaWYgKElTX0VSUihkYXRhKSkNCj4gLQkJcmV0
dXJuIFBUUl9FUlIoZGF0YSk7DQo+IC0NCj4gLQlyZXR1cm4gc3ByaW50ZihidWYsICIlZFxuIiwg
ZGF0YS0+dGVtcF9tYXhbYXR0ci0+aW5kZXhdICogMTAwMCk7DQo+IC19DQo+IC0NCj4gLXN0YXRp
YyBzc2l6ZV90IG1heF9zdG9yZShzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVjdCBkZXZpY2VfYXR0
cmlidXRlICpkZXZhdHRyLA0KPiAtCQkJIGNvbnN0IGNoYXIgKmJ1Ziwgc2l6ZV90IGNvdW50KQ0K
PiAtew0KPiAtCXN0cnVjdCBzZW5zb3JfZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciA9IHRvX3NlbnNv
cl9kZXZfYXR0cihkZXZhdHRyKTsNCj4gLQlzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRhID0gZGV2
X2dldF9kcnZkYXRhKGRldik7DQo+IC0JbG9uZyB2YWw7DQo+IC0JaW50IGVycjsNCj4gLQ0KPiAt
CWVyciA9IGtzdHJ0b2woYnVmLCAxMCwgJnZhbCk7DQo+IC0JaWYgKGVycikNCj4gLQkJcmV0dXJu
IGVycjsNCj4gLQ0KPiAtCW11dGV4X2xvY2soJmRhdGEtPnVwZGF0ZV9sb2NrKTsNCj4gLQlkYXRh
LT50ZW1wX21heFthdHRyLT5pbmRleF0gPSBURU1QX1RPX1JFRyh2YWwpOw0KPiAtCWVyciA9IHJl
Z21hcF93cml0ZShkYXRhLT5yZWdtYXAsIEFETTkyNDBfUkVHX1RFTVBfTUFYKGF0dHItPmluZGV4
KSwNCj4gLQkJCSAgIGRhdGEtPnRlbXBfbWF4W2F0dHItPmluZGV4XSk7DQo+IC0JbXV0ZXhfdW5s
b2NrKCZkYXRhLT51cGRhdGVfbG9jayk7DQo+IC0JcmV0dXJuIGVyciA8IDAgPyBlcnIgOiBjb3Vu
dDsNCj4gLX0NCj4gLQ0KPiAtc3RhdGljIERFVklDRV9BVFRSX1JPKHRlbXAxX2lucHV0KTsNCj4g
LXN0YXRpYyBTRU5TT1JfREVWSUNFX0FUVFJfUlcodGVtcDFfbWF4LCBtYXgsIDApOw0KPiAtc3Rh
dGljIFNFTlNPUl9ERVZJQ0VfQVRUUl9SVyh0ZW1wMV9tYXhfaHlzdCwgbWF4LCAxKTsNCj4gLQ0K
PiAtLyogdm9sdGFnZSAqLw0KPiAtc3RhdGljIHNzaXplX3QgaW5fc2hvdyhzdHJ1Y3QgZGV2aWNl
ICpkZXYsIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICpkZXZhdHRyLA0KPiAtCQkgICAgICAgY2hh
ciAqYnVmKQ0KPiAtew0KPiAtCXN0cnVjdCBzZW5zb3JfZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciA9
IHRvX3NlbnNvcl9kZXZfYXR0cihkZXZhdHRyKTsNCj4gLQlzdHJ1Y3QgYWRtOTI0MF9kYXRhICpk
YXRhID0gYWRtOTI0MF91cGRhdGVfZGV2aWNlKGRldik7DQo+IC0NCj4gLQlpZiAoSVNfRVJSKGRh
dGEpKQ0KPiAtCQlyZXR1cm4gUFRSX0VSUihkYXRhKTsNCj4gLQ0KPiAtCXJldHVybiBzcHJpbnRm
KGJ1ZiwgIiVkXG4iLCBJTl9GUk9NX1JFRyhkYXRhLT5pblthdHRyLT5pbmRleF0sDQo+IC0JCQkJ
YXR0ci0+aW5kZXgpKTsNCj4gLX0NCj4gLQ0KPiAtc3RhdGljIHNzaXplX3QgaW5fbWluX3Nob3co
c3RydWN0IGRldmljZSAqZGV2LA0KPiAtCQkJICAgc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmRl
dmF0dHIsIGNoYXIgKmJ1ZikNCj4gLXsNCj4gLQlzdHJ1Y3Qgc2Vuc29yX2RldmljZV9hdHRyaWJ1
dGUgKmF0dHIgPSB0b19zZW5zb3JfZGV2X2F0dHIoZGV2YXR0cik7DQo+IC0Jc3RydWN0IGFkbTky
NDBfZGF0YSAqZGF0YSA9IGFkbTkyNDBfdXBkYXRlX2RldmljZShkZXYpOw0KPiAtDQo+IC0JaWYg
KElTX0VSUihkYXRhKSkNCj4gLQkJcmV0dXJuIFBUUl9FUlIoZGF0YSk7DQo+IC0NCj4gLQlyZXR1
cm4gc3ByaW50ZihidWYsICIlZFxuIiwgSU5fRlJPTV9SRUcoZGF0YS0+aW5fbWluW2F0dHItPmlu
ZGV4XSwNCj4gLQkJCQlhdHRyLT5pbmRleCkpOw0KPiAtfQ0KPiAtDQo+IC1zdGF0aWMgc3NpemVf
dCBpbl9tYXhfc2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYsDQo+IC0JCQkgICBzdHJ1Y3QgZGV2aWNl
X2F0dHJpYnV0ZSAqZGV2YXR0ciwgY2hhciAqYnVmKQ0KPiAtew0KPiAtCXN0cnVjdCBzZW5zb3Jf
ZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciA9IHRvX3NlbnNvcl9kZXZfYXR0cihkZXZhdHRyKTsNCj4g
LQlzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRhID0gYWRtOTI0MF91cGRhdGVfZGV2aWNlKGRldik7
DQo+IC0NCj4gLQlpZiAoSVNfRVJSKGRhdGEpKQ0KPiAtCQlyZXR1cm4gUFRSX0VSUihkYXRhKTsN
Cj4gLQ0KPiAtCXJldHVybiBzcHJpbnRmKGJ1ZiwgIiVkXG4iLCBJTl9GUk9NX1JFRyhkYXRhLT5p
bl9tYXhbYXR0ci0+aW5kZXhdLA0KPiAtCQkJCWF0dHItPmluZGV4KSk7DQo+IC19DQo+IC0NCj4g
LXN0YXRpYyBzc2l6ZV90IGluX21pbl9zdG9yZShzdHJ1Y3QgZGV2aWNlICpkZXYsDQo+IC0JCQkg
ICAgc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmRldmF0dHIsIGNvbnN0IGNoYXIgKmJ1ZiwNCj4g
LQkJCSAgICBzaXplX3QgY291bnQpDQo+IC17DQo+IC0Jc3RydWN0IHNlbnNvcl9kZXZpY2VfYXR0
cmlidXRlICphdHRyID0gdG9fc2Vuc29yX2Rldl9hdHRyKGRldmF0dHIpOw0KPiAtCXN0cnVjdCBh
ZG05MjQwX2RhdGEgKmRhdGEgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsNCj4gLQl1bnNpZ25lZCBs
b25nIHZhbDsNCj4gLQlpbnQgZXJyOw0KPiAtDQo+IC0JZXJyID0ga3N0cnRvdWwoYnVmLCAxMCwg
JnZhbCk7DQo+IC0JaWYgKGVycikNCj4gLQkJcmV0dXJuIGVycjsNCj4gLQ0KPiAtCW11dGV4X2xv
Y2soJmRhdGEtPnVwZGF0ZV9sb2NrKTsNCj4gLQlkYXRhLT5pbl9taW5bYXR0ci0+aW5kZXhdID0g
SU5fVE9fUkVHKHZhbCwgYXR0ci0+aW5kZXgpOw0KPiAtCWVyciA9IHJlZ21hcF93cml0ZShkYXRh
LT5yZWdtYXAsIEFETTkyNDBfUkVHX0lOX01JTihhdHRyLT5pbmRleCksDQo+IC0JCQkgICBkYXRh
LT5pbl9taW5bYXR0ci0+aW5kZXhdKTsNCj4gLQltdXRleF91bmxvY2soJmRhdGEtPnVwZGF0ZV9s
b2NrKTsNCj4gLQlyZXR1cm4gZXJyIDwgMCA/IGVyciA6IGNvdW50Ow0KPiAtfQ0KPiAtDQo+IC1z
dGF0aWMgc3NpemVfdCBpbl9tYXhfc3RvcmUoc3RydWN0IGRldmljZSAqZGV2LA0KPiAtCQkJICAg
IHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICpkZXZhdHRyLCBjb25zdCBjaGFyICpidWYsDQo+IC0J
CQkgICAgc2l6ZV90IGNvdW50KQ0KPiAtew0KPiAtCXN0cnVjdCBzZW5zb3JfZGV2aWNlX2F0dHJp
YnV0ZSAqYXR0ciA9IHRvX3NlbnNvcl9kZXZfYXR0cihkZXZhdHRyKTsNCj4gLQlzdHJ1Y3QgYWRt
OTI0MF9kYXRhICpkYXRhID0gZGV2X2dldF9kcnZkYXRhKGRldik7DQo+IC0JdW5zaWduZWQgbG9u
ZyB2YWw7DQo+IC0JaW50IGVycjsNCj4gLQ0KPiAtCWVyciA9IGtzdHJ0b3VsKGJ1ZiwgMTAsICZ2
YWwpOw0KPiAtCWlmIChlcnIpDQo+IC0JCXJldHVybiBlcnI7DQo+IC0NCj4gLQltdXRleF9sb2Nr
KCZkYXRhLT51cGRhdGVfbG9jayk7DQo+IC0JZGF0YS0+aW5fbWF4W2F0dHItPmluZGV4XSA9IElO
X1RPX1JFRyh2YWwsIGF0dHItPmluZGV4KTsNCj4gLQllcnIgPSByZWdtYXBfd3JpdGUoZGF0YS0+
cmVnbWFwLCBBRE05MjQwX1JFR19JTl9NQVgoYXR0ci0+aW5kZXgpLA0KPiAtCQkJICAgZGF0YS0+
aW5fbWF4W2F0dHItPmluZGV4XSk7DQo+IC0JbXV0ZXhfdW5sb2NrKCZkYXRhLT51cGRhdGVfbG9j
ayk7DQo+IC0JcmV0dXJuIGVyciA8IDAgPyBlcnIgOiBjb3VudDsNCj4gLX0NCj4gLQ0KPiAtc3Rh
dGljIFNFTlNPUl9ERVZJQ0VfQVRUUl9STyhpbjBfaW5wdXQsIGluLCAwKTsNCj4gLXN0YXRpYyBT
RU5TT1JfREVWSUNFX0FUVFJfUlcoaW4wX21pbiwgaW5fbWluLCAwKTsNCj4gLXN0YXRpYyBTRU5T
T1JfREVWSUNFX0FUVFJfUlcoaW4wX21heCwgaW5fbWF4LCAwKTsNCj4gLXN0YXRpYyBTRU5TT1Jf
REVWSUNFX0FUVFJfUk8oaW4xX2lucHV0LCBpbiwgMSk7DQo+IC1zdGF0aWMgU0VOU09SX0RFVklD
RV9BVFRSX1JXKGluMV9taW4sIGluX21pbiwgMSk7DQo+IC1zdGF0aWMgU0VOU09SX0RFVklDRV9B
VFRSX1JXKGluMV9tYXgsIGluX21heCwgMSk7DQo+IC1zdGF0aWMgU0VOU09SX0RFVklDRV9BVFRS
X1JPKGluMl9pbnB1dCwgaW4sIDIpOw0KPiAtc3RhdGljIFNFTlNPUl9ERVZJQ0VfQVRUUl9SVyhp
bjJfbWluLCBpbl9taW4sIDIpOw0KPiAtc3RhdGljIFNFTlNPUl9ERVZJQ0VfQVRUUl9SVyhpbjJf
bWF4LCBpbl9tYXgsIDIpOw0KPiAtc3RhdGljIFNFTlNPUl9ERVZJQ0VfQVRUUl9STyhpbjNfaW5w
dXQsIGluLCAzKTsNCj4gLXN0YXRpYyBTRU5TT1JfREVWSUNFX0FUVFJfUlcoaW4zX21pbiwgaW5f
bWluLCAzKTsNCj4gLXN0YXRpYyBTRU5TT1JfREVWSUNFX0FUVFJfUlcoaW4zX21heCwgaW5fbWF4
LCAzKTsNCj4gLXN0YXRpYyBTRU5TT1JfREVWSUNFX0FUVFJfUk8oaW40X2lucHV0LCBpbiwgNCk7
DQo+IC1zdGF0aWMgU0VOU09SX0RFVklDRV9BVFRSX1JXKGluNF9taW4sIGluX21pbiwgNCk7DQo+
IC1zdGF0aWMgU0VOU09SX0RFVklDRV9BVFRSX1JXKGluNF9tYXgsIGluX21heCwgNCk7DQo+IC1z
dGF0aWMgU0VOU09SX0RFVklDRV9BVFRSX1JPKGluNV9pbnB1dCwgaW4sIDUpOw0KPiAtc3RhdGlj
IFNFTlNPUl9ERVZJQ0VfQVRUUl9SVyhpbjVfbWluLCBpbl9taW4sIDUpOw0KPiAtc3RhdGljIFNF
TlNPUl9ERVZJQ0VfQVRUUl9SVyhpbjVfbWF4LCBpbl9tYXgsIDUpOw0KPiAtDQo+IC0vKiBmYW5z
ICovDQo+IC1zdGF0aWMgc3NpemVfdCBmYW5fc2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYsIHN0cnVj
dCBkZXZpY2VfYXR0cmlidXRlICpkZXZhdHRyLA0KPiAtCQkJY2hhciAqYnVmKQ0KPiAtew0KPiAt
CXN0cnVjdCBzZW5zb3JfZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciA9IHRvX3NlbnNvcl9kZXZfYXR0
cihkZXZhdHRyKTsNCj4gLQlzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRhID0gYWRtOTI0MF91cGRh
dGVfZGV2aWNlKGRldik7DQo+IC0NCj4gLQlpZiAoSVNfRVJSKGRhdGEpKQ0KPiAtCQlyZXR1cm4g
UFRSX0VSUihkYXRhKTsNCj4gLQ0KPiAtCXJldHVybiBzcHJpbnRmKGJ1ZiwgIiVkXG4iLCBGQU5f
RlJPTV9SRUcoZGF0YS0+ZmFuW2F0dHItPmluZGV4XSwNCj4gLQkJCQkxIDw8IGRhdGEtPmZhbl9k
aXZbYXR0ci0+aW5kZXhdKSk7DQo+IC19DQo+IC0NCj4gLXN0YXRpYyBzc2l6ZV90IGZhbl9taW5f
c2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYsDQo+IC0JCQkgICAgc3RydWN0IGRldmljZV9hdHRyaWJ1
dGUgKmRldmF0dHIsIGNoYXIgKmJ1ZikNCj4gLXsNCj4gLQlzdHJ1Y3Qgc2Vuc29yX2RldmljZV9h
dHRyaWJ1dGUgKmF0dHIgPSB0b19zZW5zb3JfZGV2X2F0dHIoZGV2YXR0cik7DQo+IC0Jc3RydWN0
IGFkbTkyNDBfZGF0YSAqZGF0YSA9IGFkbTkyNDBfdXBkYXRlX2RldmljZShkZXYpOw0KPiAtDQo+
IC0JaWYgKElTX0VSUihkYXRhKSkNCj4gLQkJcmV0dXJuIFBUUl9FUlIoZGF0YSk7DQo+IC0NCj4g
LQlyZXR1cm4gc3ByaW50ZihidWYsICIlZFxuIiwgRkFOX0ZST01fUkVHKGRhdGEtPmZhbl9taW5b
YXR0ci0+aW5kZXhdLA0KPiAtCQkJCTEgPDwgZGF0YS0+ZmFuX2RpdlthdHRyLT5pbmRleF0pKTsN
Cj4gLX0NCj4gLQ0KPiAtc3RhdGljIHNzaXplX3QgZmFuX2Rpdl9zaG93KHN0cnVjdCBkZXZpY2Ug
KmRldiwNCj4gLQkJCSAgICBzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqZGV2YXR0ciwgY2hhciAq
YnVmKQ0KPiAtew0KPiAtCXN0cnVjdCBzZW5zb3JfZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciA9IHRv
X3NlbnNvcl9kZXZfYXR0cihkZXZhdHRyKTsNCj4gLQlzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRh
ID0gYWRtOTI0MF91cGRhdGVfZGV2aWNlKGRldik7DQo+IC0NCj4gLQlpZiAoSVNfRVJSKGRhdGEp
KQ0KPiAtCQlyZXR1cm4gUFRSX0VSUihkYXRhKTsNCj4gLQ0KPiAtCXJldHVybiBzcHJpbnRmKGJ1
ZiwgIiVkXG4iLCAxIDw8IGRhdGEtPmZhbl9kaXZbYXR0ci0+aW5kZXhdKTsNCj4gLX0NCj4gLQ0K
PiAgIC8qDQo+ICAgICogc2V0IGZhbiBzcGVlZCBsb3cgbGltaXQ6DQo+ICAgICoNCj4gQEAgLTUw
MSwzNyArMTY0LDI1IEBAIHN0YXRpYyBzc2l6ZV90IGZhbl9kaXZfc2hvdyhzdHJ1Y3QgZGV2aWNl
ICpkZXYsDQo+ICAgICogLSBvdGhlcndpc2U6IHNlbGVjdCBmYW4gY2xvY2sgZGl2aWRlciB0byBz
dWl0IGZhbiBzcGVlZCBsb3cgbGltaXQsDQo+ICAgICogICBtZWFzdXJlbWVudCBjb2RlIG1heSBh
ZGp1c3QgcmVnaXN0ZXJzIHRvIGVuc3VyZSBmYW4gc3BlZWQgcmVhZGluZw0KPiAgICAqLw0KPiAt
c3RhdGljIHNzaXplX3QgZmFuX21pbl9zdG9yZShzdHJ1Y3QgZGV2aWNlICpkZXYsDQo+IC0JCQkg
ICAgIHN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICpkZXZhdHRyLA0KPiAtCQkJICAgICBjb25zdCBj
aGFyICpidWYsIHNpemVfdCBjb3VudCkNCj4gK3N0YXRpYyBpbnQgYWRtOTI0MF9mYW5fbWluX3dy
aXRlKHN0cnVjdCBhZG05MjQwX2RhdGEgKmRhdGEsIGludCBjaGFubmVsLCBsb25nIHZhbCkNCj4g
ICB7DQo+IC0Jc3RydWN0IHNlbnNvcl9kZXZpY2VfYXR0cmlidXRlICphdHRyID0gdG9fc2Vuc29y
X2Rldl9hdHRyKGRldmF0dHIpOw0KPiAtCXN0cnVjdCBhZG05MjQwX2RhdGEgKmRhdGEgPSBkZXZf
Z2V0X2RydmRhdGEoZGV2KTsNCj4gLQlpbnQgbnIgPSBhdHRyLT5pbmRleDsNCj4gICAJdTggbmV3
X2RpdjsNCj4gLQl1bnNpZ25lZCBsb25nIHZhbDsNCj4gKwl1OCBmYW5fbWluOw0KPiAgIAlpbnQg
ZXJyOw0KPiAgIA0KPiAtCWVyciA9IGtzdHJ0b3VsKGJ1ZiwgMTAsICZ2YWwpOw0KPiAtCWlmIChl
cnIpDQo+IC0JCXJldHVybiBlcnI7DQo+IC0NCj4gICAJbXV0ZXhfbG9jaygmZGF0YS0+dXBkYXRl
X2xvY2spOw0KPiAgIA0KPiAgIAlpZiAoIXZhbCkgew0KPiAtCQlkYXRhLT5mYW5fbWluW25yXSA9
IDI1NTsNCj4gLQkJbmV3X2RpdiA9IGRhdGEtPmZhbl9kaXZbbnJdOw0KPiAtDQo+IC0JCWRldl9k
YmcoZGF0YS0+ZGV2LCAiZmFuJXUgbG93IGxpbWl0IHNldCBkaXNhYmxlZFxuIiwNCj4gLQkJCQlu
ciArIDEpOw0KPiArCQlmYW5fbWluID0gMjU1Ow0KPiArCQluZXdfZGl2ID0gZGF0YS0+ZmFuX2Rp
dltjaGFubmVsXTsNCj4gICANCj4gKwkJZGV2X2RiZyhkYXRhLT5kZXYsICJmYW4ldSBsb3cgbGlt
aXQgc2V0IGRpc2FibGVkXG4iLCBjaGFubmVsICsgMSk7DQo+ICAgCX0gZWxzZSBpZiAodmFsIDwg
MTM1MDAwMCAvICg4ICogMjU0KSkgew0KPiAgIAkJbmV3X2RpdiA9IDM7DQo+IC0JCWRhdGEtPmZh
bl9taW5bbnJdID0gMjU0Ow0KPiArCQlmYW5fbWluID0gMjU0Ow0KPiAgIA0KPiAgIAkJZGV2X2Ri
ZyhkYXRhLT5kZXYsICJmYW4ldSBsb3cgbGltaXQgc2V0IG1pbmltdW0gJXVcbiIsDQo+IC0JCQkJ
bnIgKyAxLCBGQU5fRlJPTV9SRUcoMjU0LCAxIDw8IG5ld19kaXYpKTsNCj4gLQ0KPiArCQkJY2hh
bm5lbCArIDEsIEZBTl9GUk9NX1JFRygyNTQsIEJJVChuZXdfZGl2KSkpOw0KPiAgIAl9IGVsc2Ug
ew0KPiAgIAkJdW5zaWduZWQgaW50IG5ld19taW4gPSAxMzUwMDAwIC8gdmFsOw0KPiAgIA0KPiBA
QCAtNTQzLDg3ICsxOTQsNTUgQEAgc3RhdGljIHNzaXplX3QgZmFuX21pbl9zdG9yZShzdHJ1Y3Qg
ZGV2aWNlICpkZXYsDQo+ICAgCQlpZiAoIW5ld19taW4pIC8qIGtlZXAgPiAwICovDQo+ICAgCQkJ
bmV3X21pbisrOw0KPiAgIA0KPiAtCQlkYXRhLT5mYW5fbWluW25yXSA9IG5ld19taW47DQo+ICsJ
CWZhbl9taW4gPSBuZXdfbWluOw0KPiAgIA0KPiAgIAkJZGV2X2RiZyhkYXRhLT5kZXYsICJmYW4l
dSBsb3cgbGltaXQgc2V0IGZhbiBzcGVlZCAldVxuIiwNCj4gLQkJCQluciArIDEsIEZBTl9GUk9N
X1JFRyhuZXdfbWluLCAxIDw8IG5ld19kaXYpKTsNCj4gKwkJCWNoYW5uZWwgKyAxLCBGQU5fRlJP
TV9SRUcobmV3X21pbiwgQklUKG5ld19kaXYpKSk7DQo+ICAgCX0NCj4gICANCj4gLQlpZiAobmV3
X2RpdiAhPSBkYXRhLT5mYW5fZGl2W25yXSkgew0KPiAtCQlkYXRhLT5mYW5fZGl2W25yXSA9IG5l
d19kaXY7DQo+IC0JCWFkbTkyNDBfd3JpdGVfZmFuX2RpdihkYXRhLCBuciwgbmV3X2Rpdik7DQo+
ICsJaWYgKG5ld19kaXYgIT0gZGF0YS0+ZmFuX2RpdltjaGFubmVsXSkgew0KPiArCQlkYXRhLT5m
YW5fZGl2W2NoYW5uZWxdID0gbmV3X2RpdjsNCj4gKwkJYWRtOTI0MF93cml0ZV9mYW5fZGl2KGRh
dGEsIGNoYW5uZWwsIG5ld19kaXYpOw0KPiAgIAl9DQo+IC0JZXJyID0gcmVnbWFwX3dyaXRlKGRh
dGEtPnJlZ21hcCwgQURNOTI0MF9SRUdfRkFOX01JTihuciksDQo+IC0JCQkgICBkYXRhLT5mYW5f
bWluW25yXSk7DQo+ICsJZXJyID0gcmVnbWFwX3dyaXRlKGRhdGEtPnJlZ21hcCwgQURNOTI0MF9S
RUdfRkFOX01JTihjaGFubmVsKSwgZmFuX21pbik7DQo+ICAgDQo+ICAgCW11dGV4X3VubG9jaygm
ZGF0YS0+dXBkYXRlX2xvY2spOw0KPiAtCXJldHVybiBlcnIgPCAwID8gZXJyIDogY291bnQ7DQo+
IC19DQo+IC0NCj4gLXN0YXRpYyBTRU5TT1JfREVWSUNFX0FUVFJfUk8oZmFuMV9pbnB1dCwgZmFu
LCAwKTsNCj4gLXN0YXRpYyBTRU5TT1JfREVWSUNFX0FUVFJfUlcoZmFuMV9taW4sIGZhbl9taW4s
IDApOw0KPiAtc3RhdGljIFNFTlNPUl9ERVZJQ0VfQVRUUl9STyhmYW4xX2RpdiwgZmFuX2Rpdiwg
MCk7DQo+IC1zdGF0aWMgU0VOU09SX0RFVklDRV9BVFRSX1JPKGZhbjJfaW5wdXQsIGZhbiwgMSk7
DQo+IC1zdGF0aWMgU0VOU09SX0RFVklDRV9BVFRSX1JXKGZhbjJfbWluLCBmYW5fbWluLCAxKTsN
Cj4gLXN0YXRpYyBTRU5TT1JfREVWSUNFX0FUVFJfUk8oZmFuMl9kaXYsIGZhbl9kaXYsIDEpOw0K
PiAtDQo+IC0vKiBhbGFybXMgKi8NCj4gLXN0YXRpYyBzc2l6ZV90IGFsYXJtc19zaG93KHN0cnVj
dCBkZXZpY2UgKmRldiwNCj4gLQkJc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmF0dHIsIGNoYXIg
KmJ1ZikNCj4gLXsNCj4gLQlzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRhID0gYWRtOTI0MF91cGRh
dGVfZGV2aWNlKGRldik7DQo+ICAgDQo+IC0JaWYgKElTX0VSUihkYXRhKSkNCj4gLQkJcmV0dXJu
IFBUUl9FUlIoZGF0YSk7DQo+IC0NCj4gLQlyZXR1cm4gc3ByaW50ZihidWYsICIldVxuIiwgZGF0
YS0+YWxhcm1zKTsNCj4gKwlyZXR1cm4gZXJyOw0KPiAgIH0NCj4gLXN0YXRpYyBERVZJQ0VfQVRU
Ul9STyhhbGFybXMpOw0KPiAtDQo+IC1zdGF0aWMgc3NpemVfdCBhbGFybV9zaG93KHN0cnVjdCBk
ZXZpY2UgKmRldiwgc3RydWN0IGRldmljZV9hdHRyaWJ1dGUgKmF0dHIsDQo+IC0JCQkgIGNoYXIg
KmJ1ZikNCj4gLXsNCj4gLQlpbnQgYml0bnIgPSB0b19zZW5zb3JfZGV2X2F0dHIoYXR0ciktPmlu
ZGV4Ow0KPiAtCXN0cnVjdCBhZG05MjQwX2RhdGEgKmRhdGEgPSBhZG05MjQwX3VwZGF0ZV9kZXZp
Y2UoZGV2KTsNCj4gLQ0KPiAtCWlmIChJU19FUlIoZGF0YSkpDQo+IC0JCXJldHVybiBQVFJfRVJS
KGRhdGEpOw0KPiAgIA0KPiAtCXJldHVybiBzcHJpbnRmKGJ1ZiwgIiV1XG4iLCAoZGF0YS0+YWxh
cm1zID4+IGJpdG5yKSAmIDEpOw0KPiAtfQ0KPiAtc3RhdGljIFNFTlNPUl9ERVZJQ0VfQVRUUl9S
TyhpbjBfYWxhcm0sIGFsYXJtLCAwKTsNCj4gLXN0YXRpYyBTRU5TT1JfREVWSUNFX0FUVFJfUk8o
aW4xX2FsYXJtLCBhbGFybSwgMSk7DQo+IC1zdGF0aWMgU0VOU09SX0RFVklDRV9BVFRSX1JPKGlu
Ml9hbGFybSwgYWxhcm0sIDIpOw0KPiAtc3RhdGljIFNFTlNPUl9ERVZJQ0VfQVRUUl9STyhpbjNf
YWxhcm0sIGFsYXJtLCAzKTsNCj4gLXN0YXRpYyBTRU5TT1JfREVWSUNFX0FUVFJfUk8oaW40X2Fs
YXJtLCBhbGFybSwgOCk7DQo+IC1zdGF0aWMgU0VOU09SX0RFVklDRV9BVFRSX1JPKGluNV9hbGFy
bSwgYWxhcm0sIDkpOw0KPiAtc3RhdGljIFNFTlNPUl9ERVZJQ0VfQVRUUl9STyh0ZW1wMV9hbGFy
bSwgYWxhcm0sIDQpOw0KPiAtc3RhdGljIFNFTlNPUl9ERVZJQ0VfQVRUUl9STyhmYW4xX2FsYXJt
LCBhbGFybSwgNik7DQo+IC1zdGF0aWMgU0VOU09SX0RFVklDRV9BVFRSX1JPKGZhbjJfYWxhcm0s
IGFsYXJtLCA3KTsNCj4gLQ0KPiAtLyogdmlkICovDQo+ICAgc3RhdGljIHNzaXplX3QgY3B1MF92
aWRfc2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYsDQo+ICAgCQkJICAgICBzdHJ1Y3QgZGV2aWNlX2F0
dHJpYnV0ZSAqYXR0ciwgY2hhciAqYnVmKQ0KPiAgIHsNCj4gLQlzdHJ1Y3QgYWRtOTI0MF9kYXRh
ICpkYXRhID0gYWRtOTI0MF91cGRhdGVfZGV2aWNlKGRldik7DQo+IC0NCj4gLQlpZiAoSVNfRVJS
KGRhdGEpKQ0KPiAtCQlyZXR1cm4gUFRSX0VSUihkYXRhKTsNCj4gKwlzdHJ1Y3QgYWRtOTI0MF9k
YXRhICpkYXRhID0gZGV2X2dldF9kcnZkYXRhKGRldik7DQo+ICsJdW5zaWduZWQgaW50IHJlZ3Zh
bDsNCj4gKwlpbnQgZXJyOw0KPiArCXU4IHZpZDsNCj4gICANCj4gLQlyZXR1cm4gc3ByaW50Zihi
dWYsICIlZFxuIiwgdmlkX2Zyb21fcmVnKGRhdGEtPnZpZCwgZGF0YS0+dnJtKSk7DQo+ICsJZXJy
ID0gcmVnbWFwX3JlYWQoZGF0YS0+cmVnbWFwLCBBRE05MjQwX1JFR19WSURfRkFOX0RJViwgJnJl
Z3ZhbCk7DQo+ICsJaWYgKGVyciA8IDApDQo+ICsJCXJldHVybiBlcnI7DQo+ICsJdmlkID0gcmVn
dmFsICYgMHgwZjsNCj4gKwllcnIgPSByZWdtYXBfcmVhZChkYXRhLT5yZWdtYXAsIEFETTkyNDBf
UkVHX1ZJRDQsICZyZWd2YWwpOw0KPiArCWlmIChlcnIgPCAwKQ0KPiArCQlyZXR1cm4gZXJyOw0K
PiArCXZpZCB8PSAocmVndmFsICYgMSkgPDwgNDsNCj4gKwlyZXR1cm4gc3ByaW50ZihidWYsICIl
ZFxuIiwgdmlkX2Zyb21fcmVnKHZpZCwgZGF0YS0+dnJtKSk7DQo+ICAgfQ0KPiAgIHN0YXRpYyBE
RVZJQ0VfQVRUUl9STyhjcHUwX3ZpZCk7DQo+ICAgDQo+IC0vKiBhbmFsb2cgb3V0cHV0ICovDQo+
ICAgc3RhdGljIHNzaXplX3QgYW91dF9vdXRwdXRfc2hvdyhzdHJ1Y3QgZGV2aWNlICpkZXYsDQo+
ICAgCQkJCXN0cnVjdCBkZXZpY2VfYXR0cmlidXRlICphdHRyLCBjaGFyICpidWYpDQo+ICAgew0K
PiAtCXN0cnVjdCBhZG05MjQwX2RhdGEgKmRhdGEgPSBhZG05MjQwX3VwZGF0ZV9kZXZpY2UoZGV2
KTsNCj4gKwlzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRhID0gZGV2X2dldF9kcnZkYXRhKGRldik7
DQo+ICsJdW5zaWduZWQgaW50IHJlZ3ZhbDsNCj4gKwlpbnQgZXJyOw0KPiAgIA0KPiAtCWlmIChJ
U19FUlIoZGF0YSkpDQo+IC0JCXJldHVybiBQVFJfRVJSKGRhdGEpOw0KPiArCWVyciA9IHJlZ21h
cF9yZWFkKGRhdGEtPnJlZ21hcCwgQURNOTI0MF9SRUdfQU5BTE9HX09VVCwgJnJlZ3ZhbCk7DQo+
ICsJaWYgKGVycikNCj4gKwkJcmV0dXJuIGVycjsNCj4gICANCj4gLQlyZXR1cm4gc3ByaW50Zihi
dWYsICIlZFxuIiwgQU9VVF9GUk9NX1JFRyhkYXRhLT5hb3V0KSk7DQo+ICsJcmV0dXJuIHNwcmlu
dGYoYnVmLCAiJWRcbiIsIEFPVVRfRlJPTV9SRUcocmVndmFsKSk7DQo+ICAgfQ0KPiAgIA0KPiAg
IHN0YXRpYyBzc2l6ZV90IGFvdXRfb3V0cHV0X3N0b3JlKHN0cnVjdCBkZXZpY2UgKmRldiwNCj4g
QEAgLTYzOCw3NiArMjU3LDEzIEBAIHN0YXRpYyBzc2l6ZV90IGFvdXRfb3V0cHV0X3N0b3JlKHN0
cnVjdCBkZXZpY2UgKmRldiwNCj4gICAJaWYgKGVycikNCj4gICAJCXJldHVybiBlcnI7DQo+ICAg
DQo+IC0JbXV0ZXhfbG9jaygmZGF0YS0+dXBkYXRlX2xvY2spOw0KPiAtCWRhdGEtPmFvdXQgPSBB
T1VUX1RPX1JFRyh2YWwpOw0KPiAtCWVyciA9IHJlZ21hcF93cml0ZShkYXRhLT5yZWdtYXAsIEFE
TTkyNDBfUkVHX0FOQUxPR19PVVQsIGRhdGEtPmFvdXQpOw0KPiAtCW11dGV4X3VubG9jaygmZGF0
YS0+dXBkYXRlX2xvY2spOw0KPiArCWVyciA9IHJlZ21hcF93cml0ZShkYXRhLT5yZWdtYXAsIEFE
TTkyNDBfUkVHX0FOQUxPR19PVVQsIEFPVVRfVE9fUkVHKHZhbCkpOw0KPiAgIAlyZXR1cm4gZXJy
IDwgMCA/IGVyciA6IGNvdW50Ow0KPiAgIH0NCj4gICBzdGF0aWMgREVWSUNFX0FUVFJfUlcoYW91
dF9vdXRwdXQpOw0KPiAgIA0KPiAtc3RhdGljIHNzaXplX3QgYWxhcm1fc3RvcmUoc3RydWN0IGRl
dmljZSAqZGV2LCBzdHJ1Y3QgZGV2aWNlX2F0dHJpYnV0ZSAqYXR0ciwNCj4gLQkJCSAgIGNvbnN0
IGNoYXIgKmJ1Ziwgc2l6ZV90IGNvdW50KQ0KPiAtew0KPiAtCXN0cnVjdCBhZG05MjQwX2RhdGEg
KmRhdGEgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsNCj4gLQl1bnNpZ25lZCBsb25nIHZhbDsNCj4g
LQlpbnQgZXJyOw0KPiAtDQo+IC0JaWYgKGtzdHJ0b3VsKGJ1ZiwgMTAsICZ2YWwpIHx8IHZhbCAh
PSAwKQ0KPiAtCQlyZXR1cm4gLUVJTlZBTDsNCj4gLQ0KPiAtCW11dGV4X2xvY2soJmRhdGEtPnVw
ZGF0ZV9sb2NrKTsNCj4gLQllcnIgPSByZWdtYXBfd3JpdGUoZGF0YS0+cmVnbWFwLCBBRE05MjQw
X1JFR19DSEFTU0lTX0NMRUFSLCAweDgwKTsNCj4gLQlkYXRhLT52YWxpZCA9IDA7CQkvKiBGb3Jj
ZSBjYWNoZSByZWZyZXNoICovDQo+IC0JbXV0ZXhfdW5sb2NrKCZkYXRhLT51cGRhdGVfbG9jayk7
DQo+IC0JaWYgKGVyciA8IDApDQo+IC0JCXJldHVybiBlcnI7DQo+IC0JZGV2X2RiZyhkYXRhLT5k
ZXYsICJjaGFzc2lzIGludHJ1c2lvbiBsYXRjaCBjbGVhcmVkXG4iKTsNCj4gLQ0KPiAtCXJldHVy
biBjb3VudDsNCj4gLX0NCj4gLXN0YXRpYyBTRU5TT1JfREVWSUNFX0FUVFJfUlcoaW50cnVzaW9u
MF9hbGFybSwgYWxhcm0sIDEyKTsNCj4gLQ0KPiAgIHN0YXRpYyBzdHJ1Y3QgYXR0cmlidXRlICph
ZG05MjQwX2F0dHJzW10gPSB7DQo+IC0JJnNlbnNvcl9kZXZfYXR0cl9pbjBfaW5wdXQuZGV2X2F0
dHIuYXR0ciwNCj4gLQkmc2Vuc29yX2Rldl9hdHRyX2luMF9taW4uZGV2X2F0dHIuYXR0ciwNCj4g
LQkmc2Vuc29yX2Rldl9hdHRyX2luMF9tYXguZGV2X2F0dHIuYXR0ciwNCj4gLQkmc2Vuc29yX2Rl
dl9hdHRyX2luMF9hbGFybS5kZXZfYXR0ci5hdHRyLA0KPiAtCSZzZW5zb3JfZGV2X2F0dHJfaW4x
X2lucHV0LmRldl9hdHRyLmF0dHIsDQo+IC0JJnNlbnNvcl9kZXZfYXR0cl9pbjFfbWluLmRldl9h
dHRyLmF0dHIsDQo+IC0JJnNlbnNvcl9kZXZfYXR0cl9pbjFfbWF4LmRldl9hdHRyLmF0dHIsDQo+
IC0JJnNlbnNvcl9kZXZfYXR0cl9pbjFfYWxhcm0uZGV2X2F0dHIuYXR0ciwNCj4gLQkmc2Vuc29y
X2Rldl9hdHRyX2luMl9pbnB1dC5kZXZfYXR0ci5hdHRyLA0KPiAtCSZzZW5zb3JfZGV2X2F0dHJf
aW4yX21pbi5kZXZfYXR0ci5hdHRyLA0KPiAtCSZzZW5zb3JfZGV2X2F0dHJfaW4yX21heC5kZXZf
YXR0ci5hdHRyLA0KPiAtCSZzZW5zb3JfZGV2X2F0dHJfaW4yX2FsYXJtLmRldl9hdHRyLmF0dHIs
DQo+IC0JJnNlbnNvcl9kZXZfYXR0cl9pbjNfaW5wdXQuZGV2X2F0dHIuYXR0ciwNCj4gLQkmc2Vu
c29yX2Rldl9hdHRyX2luM19taW4uZGV2X2F0dHIuYXR0ciwNCj4gLQkmc2Vuc29yX2Rldl9hdHRy
X2luM19tYXguZGV2X2F0dHIuYXR0ciwNCj4gLQkmc2Vuc29yX2Rldl9hdHRyX2luM19hbGFybS5k
ZXZfYXR0ci5hdHRyLA0KPiAtCSZzZW5zb3JfZGV2X2F0dHJfaW40X2lucHV0LmRldl9hdHRyLmF0
dHIsDQo+IC0JJnNlbnNvcl9kZXZfYXR0cl9pbjRfbWluLmRldl9hdHRyLmF0dHIsDQo+IC0JJnNl
bnNvcl9kZXZfYXR0cl9pbjRfbWF4LmRldl9hdHRyLmF0dHIsDQo+IC0JJnNlbnNvcl9kZXZfYXR0
cl9pbjRfYWxhcm0uZGV2X2F0dHIuYXR0ciwNCj4gLQkmc2Vuc29yX2Rldl9hdHRyX2luNV9pbnB1
dC5kZXZfYXR0ci5hdHRyLA0KPiAtCSZzZW5zb3JfZGV2X2F0dHJfaW41X21pbi5kZXZfYXR0ci5h
dHRyLA0KPiAtCSZzZW5zb3JfZGV2X2F0dHJfaW41X21heC5kZXZfYXR0ci5hdHRyLA0KPiAtCSZz
ZW5zb3JfZGV2X2F0dHJfaW41X2FsYXJtLmRldl9hdHRyLmF0dHIsDQo+IC0JJmRldl9hdHRyX3Rl
bXAxX2lucHV0LmF0dHIsDQo+IC0JJnNlbnNvcl9kZXZfYXR0cl90ZW1wMV9tYXguZGV2X2F0dHIu
YXR0ciwNCj4gLQkmc2Vuc29yX2Rldl9hdHRyX3RlbXAxX21heF9oeXN0LmRldl9hdHRyLmF0dHIs
DQo+IC0JJnNlbnNvcl9kZXZfYXR0cl90ZW1wMV9hbGFybS5kZXZfYXR0ci5hdHRyLA0KPiAtCSZz
ZW5zb3JfZGV2X2F0dHJfZmFuMV9pbnB1dC5kZXZfYXR0ci5hdHRyLA0KPiAtCSZzZW5zb3JfZGV2
X2F0dHJfZmFuMV9kaXYuZGV2X2F0dHIuYXR0ciwNCj4gLQkmc2Vuc29yX2Rldl9hdHRyX2ZhbjFf
bWluLmRldl9hdHRyLmF0dHIsDQo+IC0JJnNlbnNvcl9kZXZfYXR0cl9mYW4xX2FsYXJtLmRldl9h
dHRyLmF0dHIsDQo+IC0JJnNlbnNvcl9kZXZfYXR0cl9mYW4yX2lucHV0LmRldl9hdHRyLmF0dHIs
DQo+IC0JJnNlbnNvcl9kZXZfYXR0cl9mYW4yX2Rpdi5kZXZfYXR0ci5hdHRyLA0KPiAtCSZzZW5z
b3JfZGV2X2F0dHJfZmFuMl9taW4uZGV2X2F0dHIuYXR0ciwNCj4gLQkmc2Vuc29yX2Rldl9hdHRy
X2ZhbjJfYWxhcm0uZGV2X2F0dHIuYXR0ciwNCj4gLQkmZGV2X2F0dHJfYWxhcm1zLmF0dHIsDQo+
ICAgCSZkZXZfYXR0cl9hb3V0X291dHB1dC5hdHRyLA0KPiAtCSZzZW5zb3JfZGV2X2F0dHJfaW50
cnVzaW9uMF9hbGFybS5kZXZfYXR0ci5hdHRyLA0KPiAgIAkmZGV2X2F0dHJfY3B1MF92aWQuYXR0
ciwNCj4gICAJTlVMTA0KPiAgIH07DQo+IEBAIC03NDksMTMgKzMwNSwxNCBAQCBzdGF0aWMgaW50
IGFkbTkyNDBfZGV0ZWN0KHN0cnVjdCBpMmNfY2xpZW50ICpuZXdfY2xpZW50LA0KPiAgIAkJIG1h
bl9pZCA9PSAweDIzID8gIkFETTkyNDAiIDoNCj4gICAJCSBtYW5faWQgPT0gMHhkYSA/ICJEUzE3
ODAiIDogIkxNODEiLCBkaWVfcmV2KTsNCj4gICANCj4gLQlzdHJsY3B5KGluZm8tPnR5cGUsIG5h
bWUsIEkyQ19OQU1FX1NJWkUpOw0KPiArCXN0cnNjcHkoaW5mby0+dHlwZSwgbmFtZSwgSTJDX05B
TUVfU0laRSk7DQo+ICAgDQo+ICAgCXJldHVybiAwOw0KPiAgIH0NCj4gICANCj4gICBzdGF0aWMg
aW50IGFkbTkyNDBfaW5pdF9jbGllbnQoc3RydWN0IGFkbTkyNDBfZGF0YSAqZGF0YSkNCj4gICB7
DQo+ICsJdW5zaWduZWQgaW50IHJlZ3ZhbDsNCj4gICAJdTggY29uZiwgbW9kZTsNCj4gICAJaW50
IGVycjsNCj4gICANCj4gQEAgLTc5MiwxMyArMzQ5LDEzIEBAIHN0YXRpYyBpbnQgYWRtOTI0MF9p
bml0X2NsaWVudChzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRhKQ0KPiAgIAkJfQ0KPiAgIAkJZm9y
IChpID0gMDsgaSA8IDI7IGkrKykgew0KPiAgIAkJCWVyciA9IHJlZ21hcF93cml0ZShkYXRhLT5y
ZWdtYXAsDQo+IC0JCQkJCUFETTkyNDBfUkVHX0ZBTl9NSU4oaSksIDI1NSk7DQo+ICsJCQkJCSAg
IEFETTkyNDBfUkVHX0ZBTl9NSU4oaSksIDI1NSk7DQo+ICAgCQkJaWYgKGVyciA8IDApDQo+ICAg
CQkJCXJldHVybiBlcnI7DQo+ICAgCQl9DQo+ICAgCQlmb3IgKGkgPSAwOyBpIDwgMjsgaSsrKSB7
DQo+ICAgCQkJZXJyID0gcmVnbWFwX3dyaXRlKGRhdGEtPnJlZ21hcCwNCj4gLQkJCQkJQURNOTI0
MF9SRUdfVEVNUF9NQVgoaSksIDEyNyk7DQo+ICsJCQkJCSAgIEFETTkyNDBfUkVHX1RFTVBfTUFY
KGkpLCAxMjcpOw0KPiAgIAkJCWlmIChlcnIgPCAwKQ0KPiAgIAkJCQlyZXR1cm4gZXJyOw0KPiAg
IAkJfQ0KPiBAQCAtODEyLDE5ICszNjksNDEzIEBAIHN0YXRpYyBpbnQgYWRtOTI0MF9pbml0X2Ns
aWVudChzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRhKQ0KPiAgIAkJCSAiY29sZCBzdGFydDogY29u
ZmlnIHdhcyAweCUwMnggbW9kZSAldVxuIiwgY29uZiwgbW9kZSk7DQo+ICAgCX0NCj4gICANCj4g
KwkvKiByZWFkIGZhbiBkaXZzICovDQo+ICsJZXJyID0gcmVnbWFwX3JlYWQoZGF0YS0+cmVnbWFw
LCBBRE05MjQwX1JFR19WSURfRkFOX0RJViwgJnJlZ3ZhbCk7DQo+ICsJaWYgKGVyciA8IDApDQo+
ICsJCXJldHVybiBlcnI7DQo+ICsJZGF0YS0+ZmFuX2RpdlswXSA9IChyZWd2YWwgPj4gNCkgJiAz
Ow0KPiArCWRhdGEtPmZhbl9kaXZbMV0gPSAocmVndmFsID4+IDYpICYgMzsNCj4gKwlyZXR1cm4g
MDsNCj4gK30NCj4gKw0KPiArc3RhdGljIGludCBhZG05MjQwX2NoaXBfcmVhZChzdHJ1Y3QgZGV2
aWNlICpkZXYsIHUzMiBhdHRyLCBsb25nICp2YWwpDQo+ICt7DQo+ICsJc3RydWN0IGFkbTkyNDBf
ZGF0YSAqZGF0YSA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOw0KPiArCXU4IHJlZ3NbMl07DQo+ICsJ
aW50IGVycjsNCj4gKw0KPiArCXN3aXRjaCAoYXR0cikgew0KPiArCWNhc2UgaHdtb25fY2hpcF9h
bGFybXM6DQo+ICsJCWVyciA9IHJlZ21hcF9idWxrX3JlYWQoZGF0YS0+cmVnbWFwLCBBRE05MjQw
X1JFR19JTlQoMCksICZyZWdzLCAyKTsNCj4gKwkJaWYgKGVyciA8IDApDQo+ICsJCQlyZXR1cm4g
ZXJyOw0KPiArCQkqdmFsID0gcmVnc1swXSB8IHJlZ3NbMV0gPDwgODsNCj4gKwkJYnJlYWs7DQo+
ICsJZGVmYXVsdDoNCj4gKwkJcmV0dXJuIC1FT1BOT1RTVVBQOw0KPiArCX0NCj4gKwlyZXR1cm4g
MDsNCj4gK30NCj4gKw0KPiArc3RhdGljIGludCBhZG05MjQwX2ludHJ1c2lvbl9yZWFkKHN0cnVj
dCBkZXZpY2UgKmRldiwgdTMyIGF0dHIsIGxvbmcgKnZhbCkNCj4gK3sNCj4gKwlzdHJ1Y3QgYWRt
OTI0MF9kYXRhICpkYXRhID0gZGV2X2dldF9kcnZkYXRhKGRldik7DQo+ICsJdW5zaWduZWQgaW50
IHJlZ3ZhbDsNCj4gKwlpbnQgZXJyOw0KPiArDQo+ICsJc3dpdGNoIChhdHRyKSB7DQo+ICsJY2Fz
ZSBod21vbl9pbnRydXNpb25fYWxhcm06DQo+ICsJCWVyciA9IHJlZ21hcF9yZWFkKGRhdGEtPnJl
Z21hcCwgQURNOTI0MF9SRUdfSU5UKDEpLCAmcmVndmFsKTsNCj4gKwkJaWYgKGVyciA8IDApDQo+
ICsJCQlyZXR1cm4gZXJyOw0KPiArCQkqdmFsID0gISEocmVndmFsICYgQklUKDQpKTsNCj4gKwkJ
YnJlYWs7DQo+ICsJZGVmYXVsdDoNCj4gKwkJcmV0dXJuIC1FT1BOT1RTVVBQOw0KPiArCX0NCj4g
KwlyZXR1cm4gMDsNCj4gK30NCj4gKw0KPiArc3RhdGljIGludCBhZG05MjQwX2ludHJ1c2lvbl93
cml0ZShzdHJ1Y3QgZGV2aWNlICpkZXYsIHUzMiBhdHRyLCBsb25nIHZhbCkNCj4gK3sNCj4gKwlz
dHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRhID0gZGV2X2dldF9kcnZkYXRhKGRldik7DQo+ICsJaW50
IGVycjsNCj4gKw0KPiArCXN3aXRjaCAoYXR0cikgew0KPiArCWNhc2UgaHdtb25faW50cnVzaW9u
X2FsYXJtOg0KPiArCQlpZiAodmFsKQ0KPiArCQkJcmV0dXJuIC1FSU5WQUw7DQo+ICsJCWVyciA9
IHJlZ21hcF93cml0ZShkYXRhLT5yZWdtYXAsIEFETTkyNDBfUkVHX0NIQVNTSVNfQ0xFQVIsIDB4
ODApOw0KPiArCQlpZiAoZXJyIDwgMCkNCj4gKwkJCXJldHVybiBlcnI7DQo+ICsJCWRldl9kYmco
ZGF0YS0+ZGV2LCAiY2hhc3NpcyBpbnRydXNpb24gbGF0Y2ggY2xlYXJlZFxuIik7DQo+ICsJCWJy
ZWFrOw0KPiArCWRlZmF1bHQ6DQo+ICsJCXJldHVybiAtRU9QTk9UU1VQUDsNCj4gKwl9DQo+ICsJ
cmV0dXJuIDA7DQo+ICt9DQo+ICsNCj4gK3N0YXRpYyBpbnQgYWRtOTI0MF9pbl9yZWFkKHN0cnVj
dCBkZXZpY2UgKmRldiwgdTMyIGF0dHIsIGludCBjaGFubmVsLCBsb25nICp2YWwpDQo+ICt7DQo+
ICsJc3RydWN0IGFkbTkyNDBfZGF0YSAqZGF0YSA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOw0KPiAr
CXVuc2lnbmVkIGludCByZWd2YWw7DQo+ICsJaW50IHJlZzsNCj4gKwlpbnQgZXJyOw0KPiArDQo+
ICsJc3dpdGNoIChhdHRyKSB7DQo+ICsJY2FzZSBod21vbl9pbl9pbnB1dDoNCj4gKwkJcmVnID0g
QURNOTI0MF9SRUdfSU4oY2hhbm5lbCk7DQo+ICsJCWJyZWFrOw0KPiArCWNhc2UgaHdtb25faW5f
bWluOg0KPiArCQlyZWcgPSBBRE05MjQwX1JFR19JTl9NSU4oY2hhbm5lbCk7DQo+ICsJCWJyZWFr
Ow0KPiArCWNhc2UgaHdtb25faW5fbWF4Og0KPiArCQlyZWcgPSBBRE05MjQwX1JFR19JTl9NQVgo
Y2hhbm5lbCk7DQo+ICsJCWJyZWFrOw0KPiArCWNhc2UgaHdtb25faW5fYWxhcm06DQo+ICsJCWlm
IChjaGFubmVsIDwgNCkgew0KPiArCQkJcmVnID0gQURNOTI0MF9SRUdfSU5UKDApOw0KPiArCQl9
IGVsc2Ugew0KPiArCQkJcmVnID0gQURNOTI0MF9SRUdfSU5UKDEpOw0KPiArCQkJY2hhbm5lbCAt
PSA0Ow0KPiArCQl9DQo+ICsJCWVyciA9IHJlZ21hcF9yZWFkKGRhdGEtPnJlZ21hcCwgcmVnLCAm
cmVndmFsKTsNCj4gKwkJaWYgKGVyciA8IDApDQo+ICsJCQlyZXR1cm4gZXJyOw0KPiArCQkqdmFs
ID0gISEocmVndmFsICYgQklUKGNoYW5uZWwpKTsNCj4gKwkJcmV0dXJuIDA7DQo+ICsJZGVmYXVs
dDoNCj4gKwkJcmV0dXJuIC1FT1BOT1RTVVBQOw0KPiArCX0NCj4gKwllcnIgPSByZWdtYXBfcmVh
ZChkYXRhLT5yZWdtYXAsIHJlZywgJnJlZ3ZhbCk7DQo+ICsJaWYgKGVyciA8IDApDQo+ICsJCXJl
dHVybiBlcnI7DQo+ICsJKnZhbCA9IElOX0ZST01fUkVHKHJlZ3ZhbCwgY2hhbm5lbCk7DQo+ICAg
CXJldHVybiAwOw0KPiAgIH0NCj4gICANCj4gK3N0YXRpYyBpbnQgYWRtOTI0MF9pbl93cml0ZShz
dHJ1Y3QgZGV2aWNlICpkZXYsIHUzMiBhdHRyLCBpbnQgY2hhbm5lbCwgbG9uZyB2YWwpDQo+ICt7
DQo+ICsJc3RydWN0IGFkbTkyNDBfZGF0YSAqZGF0YSA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOw0K
PiArCWludCByZWc7DQo+ICsNCj4gKwlzd2l0Y2ggKGF0dHIpIHsNCj4gKwljYXNlIGh3bW9uX2lu
X21pbjoNCj4gKwkJcmVnID0gQURNOTI0MF9SRUdfSU5fTUlOKGNoYW5uZWwpOw0KPiArCQlicmVh
azsNCj4gKwljYXNlIGh3bW9uX2luX21heDoNCj4gKwkJcmVnID0gQURNOTI0MF9SRUdfSU4oY2hh
bm5lbCk7DQo+ICsJCWJyZWFrOw0KPiArCWRlZmF1bHQ6DQo+ICsJCXJldHVybiAtRU9QTk9UU1VQ
UDsNCj4gKwl9DQo+ICsJcmV0dXJuIHJlZ21hcF93cml0ZShkYXRhLT5yZWdtYXAsIHJlZywgSU5f
VE9fUkVHKHZhbCwgY2hhbm5lbCkpOw0KPiArfQ0KPiArDQo+ICtzdGF0aWMgaW50IGFkbTkyNDBf
ZmFuX3JlYWQoc3RydWN0IGRldmljZSAqZGV2LCB1MzIgYXR0ciwgaW50IGNoYW5uZWwsIGxvbmcg
KnZhbCkNCj4gK3sNCj4gKwlzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRhID0gZGV2X2dldF9kcnZk
YXRhKGRldik7DQo+ICsJdW5zaWduZWQgaW50IHJlZ3ZhbDsNCj4gKwlpbnQgZXJyOw0KPiArDQo+
ICsJc3dpdGNoIChhdHRyKSB7DQo+ICsJY2FzZSBod21vbl9mYW5faW5wdXQ6DQo+ICsJCWVyciA9
IHJlZ21hcF9yZWFkKGRhdGEtPnJlZ21hcCwgQURNOTI0MF9SRUdfRkFOKGNoYW5uZWwpLCAmcmVn
dmFsKTsNCj4gKwkJaWYgKGVyciA8IDApDQo+ICsJCQlyZXR1cm4gZXJyOw0KPiArCQlpZiAocmVn
dmFsID09IDI1NSAmJiBkYXRhLT5mYW5fZGl2W2NoYW5uZWxdIDwgMykgew0KPiArCQkJLyogYWRq
dXN0IGZhbiBjbG9jayBkaXZpZGVyIG9uIG92ZXJmbG93ICovDQo+ICsJCQllcnIgPSBhZG05MjQw
X3dyaXRlX2Zhbl9kaXYoZGF0YSwgY2hhbm5lbCwNCj4gKwkJCQkJCSAgICArK2RhdGEtPmZhbl9k
aXZbY2hhbm5lbF0pOw0KPiArCQkJaWYgKGVycikNCj4gKwkJCQlyZXR1cm4gZXJyOw0KPiArCQl9
DQo+ICsJCSp2YWwgPSBGQU5fRlJPTV9SRUcocmVndmFsLCBCSVQoZGF0YS0+ZmFuX2RpdltjaGFu
bmVsXSkpOw0KPiArCQlicmVhazsNCj4gKwljYXNlIGh3bW9uX2Zhbl9kaXY6DQo+ICsJCSp2YWwg
PSBCSVQoZGF0YS0+ZmFuX2RpdltjaGFubmVsXSk7DQo+ICsJCWJyZWFrOw0KPiArCWNhc2UgaHdt
b25fZmFuX21pbjoNCj4gKwkJZXJyID0gcmVnbWFwX3JlYWQoZGF0YS0+cmVnbWFwLCBBRE05MjQw
X1JFR19GQU5fTUlOKGNoYW5uZWwpLCAmcmVndmFsKTsNCj4gKwkJaWYgKGVyciA8IDApDQo+ICsJ
CQlyZXR1cm4gZXJyOw0KPiArCQkqdmFsID0gRkFOX0ZST01fUkVHKHJlZ3ZhbCwgQklUKGRhdGEt
PmZhbl9kaXZbY2hhbm5lbF0pKTsNCj4gKwkJYnJlYWs7DQo+ICsJY2FzZSBod21vbl9mYW5fYWxh
cm06DQo+ICsJCWVyciA9IHJlZ21hcF9yZWFkKGRhdGEtPnJlZ21hcCwgQURNOTI0MF9SRUdfSU5U
KDApLCAmcmVndmFsKTsNCj4gKwkJaWYgKGVyciA8IDApDQo+ICsJCQlyZXR1cm4gZXJyOw0KPiAr
CQkqdmFsID0gISEocmVndmFsICYgQklUKGNoYW5uZWwgKyA2KSk7DQo+ICsJCWJyZWFrOw0KPiAr
CWRlZmF1bHQ6DQo+ICsJCXJldHVybiAtRU9QTk9UU1VQUDsNCj4gKwl9DQo+ICsJcmV0dXJuIDA7
DQo+ICt9DQo+ICsNCj4gK3N0YXRpYyBpbnQgYWRtOTI0MF9mYW5fd3JpdGUoc3RydWN0IGRldmlj
ZSAqZGV2LCB1MzIgYXR0ciwgaW50IGNoYW5uZWwsIGxvbmcgdmFsKQ0KPiArew0KPiArCXN0cnVj
dCBhZG05MjQwX2RhdGEgKmRhdGEgPSBkZXZfZ2V0X2RydmRhdGEoZGV2KTsNCj4gKwlpbnQgZXJy
Ow0KPiArDQo+ICsJc3dpdGNoIChhdHRyKSB7DQo+ICsJY2FzZSBod21vbl9mYW5fbWluOg0KPiAr
CQllcnIgPSBhZG05MjQwX2Zhbl9taW5fd3JpdGUoZGF0YSwgY2hhbm5lbCwgdmFsKTsNCj4gKwkJ
aWYgKGVyciA8IDApDQo+ICsJCQlyZXR1cm4gZXJyOw0KPiArCQlicmVhazsNCj4gKwlkZWZhdWx0
Og0KPiArCQlyZXR1cm4gLUVPUE5PVFNVUFA7DQo+ICsJfQ0KPiArCXJldHVybiAwOw0KPiArfQ0K
PiArDQo+ICtzdGF0aWMgaW50IGFkbTkyNDBfdGVtcF9yZWFkKHN0cnVjdCBkZXZpY2UgKmRldiwg
dTMyIGF0dHIsIGludCBjaGFubmVsLCBsb25nICp2YWwpDQo+ICt7DQo+ICsJc3RydWN0IGFkbTky
NDBfZGF0YSAqZGF0YSA9IGRldl9nZXRfZHJ2ZGF0YShkZXYpOw0KPiArCXVuc2lnbmVkIGludCBy
ZWd2YWw7DQo+ICsJaW50IGVyciwgdGVtcDsNCj4gKw0KPiArCXN3aXRjaCAoYXR0cikgew0KPiAr
CWNhc2UgaHdtb25fdGVtcF9pbnB1dDoNCj4gKwkJZXJyID0gcmVnbWFwX3JlYWQoZGF0YS0+cmVn
bWFwLCBBRE05MjQwX1JFR19URU1QLCAmcmVndmFsKTsNCj4gKwkJaWYgKGVyciA8IDApDQo+ICsJ
CQlyZXR1cm4gZXJyOw0KPiArCQl0ZW1wID0gcmVndmFsIDw8IDE7DQo+ICsJCWVyciA9IHJlZ21h
cF9yZWFkKGRhdGEtPnJlZ21hcCwgQURNOTI0MF9SRUdfVEVNUF9DT05GLCAmcmVndmFsKTsNCj4g
KwkJaWYgKGVyciA8IDApDQo+ICsJCQlyZXR1cm4gZXJyOw0KPiArCQl0ZW1wIHw9IHJlZ3ZhbCA+
PiA3Ow0KPiArCQkqdmFsID0gc2lnbl9leHRlbmQzMih0ZW1wLCA4KSAqIDUwMDsNCj4gKwkJYnJl
YWs7DQo+ICsJY2FzZSBod21vbl90ZW1wX21heDoNCj4gKwkJZXJyID0gcmVnbWFwX3JlYWQoZGF0
YS0+cmVnbWFwLCBBRE05MjQwX1JFR19URU1QX01BWCgwKSwgJnJlZ3ZhbCk7DQo+ICsJCWlmIChl
cnIgPCAwKQ0KPiArCQkJcmV0dXJuIGVycjsNCj4gKwkJKnZhbCA9IChzOClyZWd2YWwgKiAxMDAw
Ow0KPiArCQlicmVhazsNCj4gKwljYXNlIGh3bW9uX3RlbXBfbWF4X2h5c3Q6DQo+ICsJCWVyciA9
IHJlZ21hcF9yZWFkKGRhdGEtPnJlZ21hcCwgQURNOTI0MF9SRUdfVEVNUF9NQVgoMSksICZyZWd2
YWwpOw0KPiArCQlpZiAoZXJyIDwgMCkNCj4gKwkJCXJldHVybiBlcnI7DQo+ICsJCSp2YWwgPSAo
czgpcmVndmFsICogMTAwMDsNCj4gKwkJYnJlYWs7DQo+ICsJY2FzZSBod21vbl90ZW1wX2FsYXJt
Og0KPiArCQllcnIgPSByZWdtYXBfcmVhZChkYXRhLT5yZWdtYXAsIEFETTkyNDBfUkVHX0lOVCgw
KSwgJnJlZ3ZhbCk7DQo+ICsJCWlmIChlcnIgPCAwKQ0KPiArCQkJcmV0dXJuIGVycjsNCj4gKwkJ
KnZhbCA9ICEhKHJlZ3ZhbCAmIEJJVCg0KSk7DQo+ICsJCWJyZWFrOw0KPiArCWRlZmF1bHQ6DQo+
ICsJCXJldHVybiAtRU9QTk9UU1VQUDsNCj4gKwl9DQo+ICsJcmV0dXJuIDA7DQo+ICt9DQo+ICsN
Cj4gK3N0YXRpYyBpbnQgYWRtOTI0MF90ZW1wX3dyaXRlKHN0cnVjdCBkZXZpY2UgKmRldiwgdTMy
IGF0dHIsIGludCBjaGFubmVsLCBsb25nIHZhbCkNCj4gK3sNCj4gKwlzdHJ1Y3QgYWRtOTI0MF9k
YXRhICpkYXRhID0gZGV2X2dldF9kcnZkYXRhKGRldik7DQo+ICsJaW50IHJlZzsNCj4gKw0KPiAr
CXN3aXRjaCAoYXR0cikgew0KPiArCWNhc2UgaHdtb25fdGVtcF9tYXg6DQo+ICsJCXJlZyA9IEFE
TTkyNDBfUkVHX1RFTVBfTUFYKDApOw0KPiArCQlicmVhazsNCj4gKwljYXNlIGh3bW9uX3RlbXBf
bWF4X2h5c3Q6DQo+ICsJCXJlZyA9IEFETTkyNDBfUkVHX1RFTVBfTUFYKDEpOw0KPiArCQlicmVh
azsNCj4gKwlkZWZhdWx0Og0KPiArCQlyZXR1cm4gLUVPUE5PVFNVUFA7DQo+ICsJfQ0KPiArCXJl
dHVybiByZWdtYXBfd3JpdGUoZGF0YS0+cmVnbWFwLCByZWcsIFRFTVBfVE9fUkVHKHZhbCkpOw0K
PiArfQ0KPiArDQo+ICtzdGF0aWMgaW50IGFkbTkyNDBfcmVhZChzdHJ1Y3QgZGV2aWNlICpkZXYs
IGVudW0gaHdtb25fc2Vuc29yX3R5cGVzIHR5cGUsIHUzMiBhdHRyLA0KPiArCQkJaW50IGNoYW5u
ZWwsIGxvbmcgKnZhbCkNCj4gK3sNCj4gKwlzd2l0Y2ggKHR5cGUpIHsNCj4gKwljYXNlIGh3bW9u
X2NoaXA6DQo+ICsJCXJldHVybiBhZG05MjQwX2NoaXBfcmVhZChkZXYsIGF0dHIsIHZhbCk7DQo+
ICsJY2FzZSBod21vbl9pbnRydXNpb246DQo+ICsJCXJldHVybiBhZG05MjQwX2ludHJ1c2lvbl9y
ZWFkKGRldiwgYXR0ciwgdmFsKTsNCj4gKwljYXNlIGh3bW9uX2luOg0KPiArCQlyZXR1cm4gYWRt
OTI0MF9pbl9yZWFkKGRldiwgYXR0ciwgY2hhbm5lbCwgdmFsKTsNCj4gKwljYXNlIGh3bW9uX2Zh
bjoNCj4gKwkJcmV0dXJuIGFkbTkyNDBfZmFuX3JlYWQoZGV2LCBhdHRyLCBjaGFubmVsLCB2YWwp
Ow0KPiArCWNhc2UgaHdtb25fdGVtcDoNCj4gKwkJcmV0dXJuIGFkbTkyNDBfdGVtcF9yZWFkKGRl
diwgYXR0ciwgY2hhbm5lbCwgdmFsKTsNCj4gKwlkZWZhdWx0Og0KPiArCQlyZXR1cm4gLUVPUE5P
VFNVUFA7DQo+ICsJfQ0KPiArfQ0KPiArDQo+ICtzdGF0aWMgaW50IGFkbTkyNDBfd3JpdGUoc3Ry
dWN0IGRldmljZSAqZGV2LCBlbnVtIGh3bW9uX3NlbnNvcl90eXBlcyB0eXBlLCB1MzIgYXR0ciwN
Cj4gKwkJCSBpbnQgY2hhbm5lbCwgbG9uZyB2YWwpDQo+ICt7DQo+ICsJc3dpdGNoICh0eXBlKSB7
DQo+ICsJY2FzZSBod21vbl9pbnRydXNpb246DQo+ICsJCXJldHVybiBhZG05MjQwX2ludHJ1c2lv
bl93cml0ZShkZXYsIGF0dHIsIHZhbCk7DQo+ICsJY2FzZSBod21vbl9pbjoNCj4gKwkJcmV0dXJu
IGFkbTkyNDBfaW5fd3JpdGUoZGV2LCBhdHRyLCBjaGFubmVsLCB2YWwpOw0KPiArCWNhc2UgaHdt
b25fZmFuOg0KPiArCQlyZXR1cm4gYWRtOTI0MF9mYW5fd3JpdGUoZGV2LCBhdHRyLCBjaGFubmVs
LCB2YWwpOw0KPiArCWNhc2UgaHdtb25fdGVtcDoNCj4gKwkJcmV0dXJuIGFkbTkyNDBfdGVtcF93
cml0ZShkZXYsIGF0dHIsIGNoYW5uZWwsIHZhbCk7DQo+ICsJZGVmYXVsdDoNCj4gKwkJcmV0dXJu
IC1FT1BOT1RTVVBQOw0KPiArCX0NCj4gK30NCj4gKw0KPiArc3RhdGljIHVtb2RlX3QgYWRtOTI0
MF9pc192aXNpYmxlKGNvbnN0IHZvaWQgKl9kYXRhLCBlbnVtIGh3bW9uX3NlbnNvcl90eXBlcyB0
eXBlLA0KPiArCQkJCSAgdTMyIGF0dHIsIGludCBjaGFubmVsKQ0KPiArew0KPiArCXVtb2RlX3Qg
bW9kZSA9IDA7DQo+ICsNCj4gKwlzd2l0Y2ggKHR5cGUpIHsNCj4gKwljYXNlIGh3bW9uX2NoaXA6
DQo+ICsJCXN3aXRjaCAoYXR0cikgew0KPiArCQljYXNlIGh3bW9uX2NoaXBfYWxhcm1zOg0KPiAr
CQkJbW9kZSA9IDA0NDQ7DQo+ICsJCQlicmVhazsNCj4gKwkJZGVmYXVsdDoNCj4gKwkJCWJyZWFr
Ow0KPiArCQl9DQo+ICsJCWJyZWFrOw0KPiArCWNhc2UgaHdtb25faW50cnVzaW9uOg0KPiArCQlz
d2l0Y2ggKGF0dHIpIHsNCj4gKwkJY2FzZSBod21vbl9pbnRydXNpb25fYWxhcm06DQo+ICsJCQlt
b2RlID0gMDY0NDsNCj4gKwkJCWJyZWFrOw0KPiArCQlkZWZhdWx0Og0KPiArCQkJYnJlYWs7DQo+
ICsJCX0NCj4gKwkJYnJlYWs7DQo+ICsJY2FzZSBod21vbl90ZW1wOg0KPiArCQlzd2l0Y2ggKGF0
dHIpIHsNCj4gKwkJY2FzZSBod21vbl90ZW1wOg0KPiArCQljYXNlIGh3bW9uX3RlbXBfYWxhcm06
DQo+ICsJCQltb2RlID0gMDQ0NDsNCj4gKwkJCWJyZWFrOw0KPiArCQljYXNlIGh3bW9uX3RlbXBf
bWF4Og0KPiArCQljYXNlIGh3bW9uX3RlbXBfbWF4X2h5c3Q6DQo+ICsJCQltb2RlID0gMDY0NDsN
Cj4gKwkJCWJyZWFrOw0KPiArCQlkZWZhdWx0Og0KPiArCQkJYnJlYWs7DQo+ICsJCX0NCj4gKwkJ
YnJlYWs7DQo+ICsJY2FzZSBod21vbl9mYW46DQo+ICsJCXN3aXRjaCAoYXR0cikgew0KPiArCQlj
YXNlIGh3bW9uX2Zhbl9pbnB1dDoNCj4gKwkJY2FzZSBod21vbl9mYW5fZGl2Og0KPiArCQljYXNl
IGh3bW9uX2Zhbl9hbGFybToNCj4gKwkJCW1vZGUgPSAwNDQ0Ow0KPiArCQkJYnJlYWs7DQo+ICsJ
CWNhc2UgaHdtb25fZmFuX21pbjoNCj4gKwkJCW1vZGUgPSAwNjQ0Ow0KPiArCQkJYnJlYWs7DQo+
ICsJCWRlZmF1bHQ6DQo+ICsJCQlicmVhazsNCj4gKwkJfQ0KPiArCQlicmVhazsNCj4gKwljYXNl
IGh3bW9uX2luOg0KPiArCQlzd2l0Y2ggKGF0dHIpIHsNCj4gKwkJY2FzZSBod21vbl9pbl9pbnB1
dDoNCj4gKwkJY2FzZSBod21vbl9pbl9hbGFybToNCj4gKwkJCW1vZGUgPSAwNDQ0Ow0KPiArCQkJ
YnJlYWs7DQo+ICsJCWNhc2UgaHdtb25faW5fbWluOg0KPiArCQljYXNlIGh3bW9uX2luX21heDoN
Cj4gKwkJCW1vZGUgPSAwNjQ0Ow0KPiArCQkJYnJlYWs7DQo+ICsJCWRlZmF1bHQ6DQo+ICsJCQli
cmVhazsNCj4gKwkJfQ0KPiArCQlicmVhazsNCj4gKwlkZWZhdWx0Og0KPiArCQlicmVhazsNCj4g
Kwl9DQo+ICsJcmV0dXJuIG1vZGU7DQo+ICt9DQo+ICsNCj4gK3N0YXRpYyBjb25zdCBzdHJ1Y3Qg
aHdtb25fb3BzIGFkbTkyNDBfaHdtb25fb3BzID0gew0KPiArCS5pc192aXNpYmxlID0gYWRtOTI0
MF9pc192aXNpYmxlLA0KPiArCS5yZWFkID0gYWRtOTI0MF9yZWFkLA0KPiArCS53cml0ZSA9IGFk
bTkyNDBfd3JpdGUsDQo+ICt9Ow0KPiArDQo+ICtzdGF0aWMgY29uc3Qgc3RydWN0IGh3bW9uX2No
YW5uZWxfaW5mbyAqYWRtOTI0MF9pbmZvW10gPSB7DQo+ICsJSFdNT05fQ0hBTk5FTF9JTkZPKGNo
aXAsIEhXTU9OX0NfQUxBUk1TKSwNCj4gKwlIV01PTl9DSEFOTkVMX0lORk8oaW50cnVzaW9uLCBI
V01PTl9JTlRSVVNJT05fQUxBUk0pLA0KPiArCUhXTU9OX0NIQU5ORUxfSU5GTyh0ZW1wLA0KPiAr
CQkJICAgSFdNT05fVF9JTlBVVCB8IEhXTU9OX1RfTUFYIHwgSFdNT05fVF9NQVhfSFlTVCB8IEhX
TU9OX1RfQUxBUk0pLA0KPiArCUhXTU9OX0NIQU5ORUxfSU5GTyhpbiwNCj4gKwkJCSAgIEhXTU9O
X0lfSU5QVVQgfCBIV01PTl9JX01JTiB8IEhXTU9OX0lfTUFYIHwgSFdNT05fSV9BTEFSTSwNCj4g
KwkJCSAgIEhXTU9OX0lfSU5QVVQgfCBIV01PTl9JX01JTiB8IEhXTU9OX0lfTUFYIHwgSFdNT05f
SV9BTEFSTSwNCj4gKwkJCSAgIEhXTU9OX0lfSU5QVVQgfCBIV01PTl9JX01JTiB8IEhXTU9OX0lf
TUFYIHwgSFdNT05fSV9BTEFSTSwNCj4gKwkJCSAgIEhXTU9OX0lfSU5QVVQgfCBIV01PTl9JX01J
TiB8IEhXTU9OX0lfTUFYIHwgSFdNT05fSV9BTEFSTSwNCj4gKwkJCSAgIEhXTU9OX0lfSU5QVVQg
fCBIV01PTl9JX01JTiB8IEhXTU9OX0lfTUFYIHwgSFdNT05fSV9BTEFSTSwNCj4gKwkJCSAgIEhX
TU9OX0lfSU5QVVQgfCBIV01PTl9JX01JTiB8IEhXTU9OX0lfTUFYIHwgSFdNT05fSV9BTEFSTSks
DQo+ICsJSFdNT05fQ0hBTk5FTF9JTkZPKGZhbiwNCj4gKwkJCSAgIEhXTU9OX0ZfSU5QVVQgfCBI
V01PTl9GX01JTiB8IEhXTU9OX0ZfRElWIHwgSFdNT05fRl9BTEFSTSwNCj4gKwkJCSAgIEhXTU9O
X0ZfSU5QVVQgfCBIV01PTl9GX01JTiB8IEhXTU9OX0ZfRElWIHwgSFdNT05fRl9BTEFSTSksDQo+
ICsJTlVMTA0KPiArfTsNCj4gKw0KPiArc3RhdGljIGNvbnN0IHN0cnVjdCBod21vbl9jaGlwX2lu
Zm8gYWRtOTI0MF9jaGlwX2luZm8gPSB7DQo+ICsJLm9wcyA9ICZhZG05MjQwX2h3bW9uX29wcywN
Cj4gKwkuaW5mbyA9IGFkbTkyNDBfaW5mbywNCj4gK307DQo+ICsNCj4gK3N0YXRpYyBib29sIGFk
bTkyNDBfdm9sYXRpbGVfcmVnKHN0cnVjdCBkZXZpY2UgKmRldiwgdW5zaWduZWQgaW50IHJlZykN
Cj4gK3sNCj4gKwlzd2l0Y2ggKHJlZykgew0KPiArCWNhc2UgQURNOTI0MF9SRUdfSU4oMCkgLi4u
IEFETTkyNDBfUkVHX0lOKDUpOg0KPiArCWNhc2UgQURNOTI0MF9SRUdfRkFOKDApIC4uLiBBRE05
MjQwX1JFR19GQU4oMSk6DQo+ICsJY2FzZSBBRE05MjQwX1JFR19JTlQoMCkgLi4uIEFETTkyNDBf
UkVHX0lOVCgxKToNCj4gKwljYXNlIEFETTkyNDBfUkVHX1RFTVA6DQo+ICsJY2FzZSBBRE05MjQw
X1JFR19URU1QX0NPTkY6DQo+ICsJY2FzZSBBRE05MjQwX1JFR19WSURfRkFOX0RJVjoNCj4gKwlj
YXNlIEFETTkyNDBfUkVHX1ZJRDQ6DQo+ICsJY2FzZSBBRE05MjQwX1JFR19BTkFMT0dfT1VUOg0K
PiArCQlyZXR1cm4gdHJ1ZTsNCj4gKwlkZWZhdWx0Og0KPiArCQlyZXR1cm4gZmFsc2U7DQo+ICsJ
fQ0KPiArfQ0KPiArDQo+ICAgc3RhdGljIGNvbnN0IHN0cnVjdCByZWdtYXBfY29uZmlnIGFkbTky
NDBfcmVnbWFwX2NvbmZpZyA9IHsNCj4gICAJLnJlZ19iaXRzID0gOCwNCj4gICAJLnZhbF9iaXRz
ID0gOCwNCj4gICAJLnVzZV9zaW5nbGVfcmVhZCA9IHRydWUsDQo+ICAgCS51c2Vfc2luZ2xlX3dy
aXRlID0gdHJ1ZSwNCj4gKwkudm9sYXRpbGVfcmVnID0gYWRtOTI0MF92b2xhdGlsZV9yZWcsDQo+
ICAgfTsNCj4gICANCj4gLXN0YXRpYyBpbnQgYWRtOTI0MF9wcm9iZShzdHJ1Y3QgaTJjX2NsaWVu
dCAqbmV3X2NsaWVudCkNCj4gK3N0YXRpYyBpbnQgYWRtOTI0MF9wcm9iZShzdHJ1Y3QgaTJjX2Ns
aWVudCAqY2xpZW50KQ0KPiAgIHsNCj4gLQlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmbmV3X2NsaWVu
dC0+ZGV2Ow0KPiArCXN0cnVjdCBkZXZpY2UgKmRldiA9ICZjbGllbnQtPmRldjsNCj4gICAJc3Ry
dWN0IGRldmljZSAqaHdtb25fZGV2Ow0KPiAgIAlzdHJ1Y3QgYWRtOTI0MF9kYXRhICpkYXRhOw0K
PiAgIAlpbnQgZXJyOw0KPiBAQCAtODM1LDcgKzc4Niw3IEBAIHN0YXRpYyBpbnQgYWRtOTI0MF9w
cm9iZShzdHJ1Y3QgaTJjX2NsaWVudCAqbmV3X2NsaWVudCkNCj4gICANCj4gICAJZGF0YS0+ZGV2
ID0gZGV2Ow0KPiAgIAltdXRleF9pbml0KCZkYXRhLT51cGRhdGVfbG9jayk7DQo+IC0JZGF0YS0+
cmVnbWFwID0gZGV2bV9yZWdtYXBfaW5pdF9pMmMobmV3X2NsaWVudCwgJmFkbTkyNDBfcmVnbWFw
X2NvbmZpZyk7DQo+ICsJZGF0YS0+cmVnbWFwID0gZGV2bV9yZWdtYXBfaW5pdF9pMmMoY2xpZW50
LCAmYWRtOTI0MF9yZWdtYXBfY29uZmlnKTsNCj4gICAJaWYgKElTX0VSUihkYXRhLT5yZWdtYXAp
KQ0KPiAgIAkJcmV0dXJuIFBUUl9FUlIoZGF0YS0+cmVnbWFwKTsNCj4gICANCj4gQEAgLTg0Mywx
MCArNzk0LDkgQEAgc3RhdGljIGludCBhZG05MjQwX3Byb2JlKHN0cnVjdCBpMmNfY2xpZW50ICpu
ZXdfY2xpZW50KQ0KPiAgIAlpZiAoZXJyIDwgMCkNCj4gICAJCXJldHVybiBlcnI7DQo+ICAgDQo+
IC0JaHdtb25fZGV2ID0gZGV2bV9od21vbl9kZXZpY2VfcmVnaXN0ZXJfd2l0aF9ncm91cHMoZGV2
LA0KPiAtCQkJCQkJCSAgIG5ld19jbGllbnQtPm5hbWUsDQo+IC0JCQkJCQkJICAgZGF0YSwNCj4g
LQkJCQkJCQkgICBhZG05MjQwX2dyb3Vwcyk7DQo+ICsJaHdtb25fZGV2ID0gZGV2bV9od21vbl9k
ZXZpY2VfcmVnaXN0ZXJfd2l0aF9pbmZvKGRldiwgY2xpZW50LT5uYW1lLCBkYXRhLA0KPiArCQkJ
CQkJCSAmYWRtOTI0MF9jaGlwX2luZm8sDQo+ICsJCQkJCQkJIGFkbTkyNDBfZ3JvdXBzKTsNCj4g
ICAJcmV0dXJuIFBUUl9FUlJfT1JfWkVSTyhod21vbl9kZXYpOw0KPiAgIH0NCj4gICA=
